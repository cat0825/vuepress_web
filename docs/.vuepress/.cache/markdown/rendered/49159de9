{"content":"<p><strong>分类</strong>：数据科学<br>\n<strong>标签</strong>：数据合成、质量过滤、模型训练<br>\n<strong>日期</strong>：2023年10月25日</p>\n<h2 id=\"数据生产合成\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数据生产合成\"><span>数据生产合成</span></a></h2>\n<p>数据生产合成的核心在于通过多样化的 prompt（提示）设计来满足大模型在不同专项能力上的需求。这通常通过以下几种方法实现：\n<img src=\"/img/user/附件/Pasted image 20250410222852.png\" alt=\"Pasted image 20250410222852.png\"></p>\n<h3 id=\"生产合成-prompt\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#生产合成-prompt\"><span>生产合成 Prompt</span></a></h3>\n<ol>\n<li><strong>Self-Instruct 方法</strong>：将技能库划分为不同的任务类型（task_type），为每个类型准备一些种子提示（seed prompt）。然后随机选择种子，利用强大模型生成更多问题。</li>\n<li><strong>启发式规则合成</strong>：通过各种启发式规则收集不同任务类型的数据集，并进行适当改写。改写可以通过强大模型完成，生成不同格式和风格的 prompt。</li>\n</ol>\n<h3 id=\"生产合成-answer\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#生产合成-answer\"><span>生产合成 Answer</span></a></h3>\n<p>使用效果好的模型如 GPT-4 来生成答案是优选方案。对于成本敏感或中文数据为主的场景，可选择在本地部署模型如 Qwen_72B。</p>\n<h2 id=\"数据质量过滤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数据质量过滤\"><span>数据质量过滤</span></a></h2>\n<h3 id=\"ifd-过滤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ifd-过滤\"><span>IFD 过滤</span></a></h3>\n<p>数据质量过滤的关键在于根据指令跟踪难度筛选数据。初步训练阶段，模型通过内在的指令辨别能力评估数据集质量。</p>\n<p><img src=\"/img/user/附件/Pasted image 20250410222910.png\" alt=\"Pasted image 20250410222910.png\"></p>\n<h3 id=\"总体流程\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#总体流程\"><span>总体流程</span></a></h3>\n<ol>\n<li><strong>经验学习</strong>：从简单经验中学习，强迫模型首先熟悉目标数据集的一个子集。</li>\n<li><strong>多样性确保</strong>：在指令嵌入上使用 K-Means 聚类方法，确保初始模型遇到足够多样的指令。</li>\n</ol>\n<h2 id=\"思考\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#思考\"><span>思考</span></a></h2>\n<ul>\n<li>如何在数据合成过程中更高效地提高 prompt 的多样性？</li>\n<li>在数据质量过滤中，如何自动化评估指令执行难度？</li>\n<li>是否有其他更有效的方法来优化小模型的训练过程？</li>\n</ul>\n<blockquote>\n<p>原始出处：<a href=\"https://github.com/vndee/llm-sandbox\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/vndee/llm-sandbox</a>、<a href=\"https://arxiv.org/abs/2410.23074\" target=\"_blank\" rel=\"noopener noreferrer\">https://arxiv.org/abs/2410.23074</a></p>\n</blockquote>\n<h2 id=\"操作步骤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#操作步骤\"><span>操作步骤</span></a></h2>\n<ol>\n<li>✅ 划分技能库并准备种子提示。</li>\n<li>⚠ 使用启发式规则收集和改写数据。</li>\n<li>❗ 使用强大模型生成答案并进行模型训练。</li>\n</ol>\n<h2 id=\"常见错误\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#常见错误\"><span>常见错误</span></a></h2>\n<blockquote>\n<p>警告：在数据合成过程中，忽视多样性可能导致模型过拟合。</p>\n</blockquote>\n<h2 id=\"💡-启发点\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#💡-启发点\"><span>💡 启发点</span></a></h2>\n<ul>\n<li>利用强大模型进行数据合成可以显著提升生成效果。</li>\n<li>数据质量过滤通过指令辨别能力提高整体数据集质量。</li>\n</ul>\n<h2 id=\"行动清单\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#行动清单\"><span>行动清单</span></a></h2>\n<ul>\n<li>研究更多启发式规则以优化 prompt 合成。</li>\n<li>探索自动化评估指令执行难度的方法。</li>\n<li>试验不同模型组合以优化训练效果。</li>\n</ul>\n<h2 id=\"📈-趋势预测\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#📈-趋势预测\"><span>📈 趋势预测</span></a></h2>\n<p>未来，随着大模型需求的增加，数据合成和质量过滤技术将会更加智能化和自动化，以支持更复杂的任务类型。</p>\n<h2 id=\"后续追踪\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#后续追踪\"><span>后续追踪</span></a></h2>\n<ul>\n<li>进一步探索自我指导的方式来评估指令难度。</li>\n<li>开发更高效的数据质量过滤算法。</li>\n</ul>\n","env":{"base":"/","filePath":"/Users/qianyuhe/Desktop/my-project/docs/notes_bak/大语言模型学习/后训练/SFT监督微调/SFT数据及处理/数据生产合成与质量过滤.md","filePathRelative":"notes_bak/大语言模型学习/后训练/SFT监督微调/SFT数据及处理/数据生产合成与质量过滤.md","frontmatter":{"dg-publish":true,"dg-permalink":"/大语言模型学习/后训练/SFT监督微调/SFT数据及处理/数据生产合成与质量过滤","dg-home":false,"dg-description":"在此输入笔记的描述","dg-hide":false,"dg-hide-title":false,"dg-show-backlinks":true,"dg-show-local-graph":true,"dg-show-inline-title":true,"dg-pinned":false,"dg-passphrase":"在此输入访问密码","dg-enable-mathjax":false,"dg-enable-mermaid":false,"dg-enable-uml":false,"dg-note-icon":0,"dg-enable-dataview":false,"tags":["NLP"],"permalink":"/大语言模型学习/后训练/SFT监督微调/SFT数据及处理/数据生产合成与质量过滤/","dgShowBacklinks":true,"dgShowLocalGraph":true,"dgShowInlineTitle":true,"dgPassFrontmatter":true,"noteIcon":0,"created":"2025-04-10T14:27:36.000Z","updated":"2025-04-13T05:06:02.000Z","title":"数据生产合成与质量过滤","createTime":"2025/05/13 17:33:52"},"sfcBlocks":{"template":{"type":"template","content":"<template><p><strong>分类</strong>：数据科学<br>\n<strong>标签</strong>：数据合成、质量过滤、模型训练<br>\n<strong>日期</strong>：2023年10月25日</p>\n<h2 id=\"数据生产合成\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数据生产合成\"><span>数据生产合成</span></a></h2>\n<p>数据生产合成的核心在于通过多样化的 prompt（提示）设计来满足大模型在不同专项能力上的需求。这通常通过以下几种方法实现：\n<img src=\"/img/user/附件/Pasted image 20250410222852.png\" alt=\"Pasted image 20250410222852.png\"></p>\n<h3 id=\"生产合成-prompt\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#生产合成-prompt\"><span>生产合成 Prompt</span></a></h3>\n<ol>\n<li><strong>Self-Instruct 方法</strong>：将技能库划分为不同的任务类型（task_type），为每个类型准备一些种子提示（seed prompt）。然后随机选择种子，利用强大模型生成更多问题。</li>\n<li><strong>启发式规则合成</strong>：通过各种启发式规则收集不同任务类型的数据集，并进行适当改写。改写可以通过强大模型完成，生成不同格式和风格的 prompt。</li>\n</ol>\n<h3 id=\"生产合成-answer\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#生产合成-answer\"><span>生产合成 Answer</span></a></h3>\n<p>使用效果好的模型如 GPT-4 来生成答案是优选方案。对于成本敏感或中文数据为主的场景，可选择在本地部署模型如 Qwen_72B。</p>\n<h2 id=\"数据质量过滤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数据质量过滤\"><span>数据质量过滤</span></a></h2>\n<h3 id=\"ifd-过滤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ifd-过滤\"><span>IFD 过滤</span></a></h3>\n<p>数据质量过滤的关键在于根据指令跟踪难度筛选数据。初步训练阶段，模型通过内在的指令辨别能力评估数据集质量。</p>\n<p><img src=\"/img/user/附件/Pasted image 20250410222910.png\" alt=\"Pasted image 20250410222910.png\"></p>\n<h3 id=\"总体流程\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#总体流程\"><span>总体流程</span></a></h3>\n<ol>\n<li><strong>经验学习</strong>：从简单经验中学习，强迫模型首先熟悉目标数据集的一个子集。</li>\n<li><strong>多样性确保</strong>：在指令嵌入上使用 K-Means 聚类方法，确保初始模型遇到足够多样的指令。</li>\n</ol>\n<h2 id=\"思考\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#思考\"><span>思考</span></a></h2>\n<ul>\n<li>如何在数据合成过程中更高效地提高 prompt 的多样性？</li>\n<li>在数据质量过滤中，如何自动化评估指令执行难度？</li>\n<li>是否有其他更有效的方法来优化小模型的训练过程？</li>\n</ul>\n<blockquote>\n<p>原始出处：<a href=\"https://github.com/vndee/llm-sandbox\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/vndee/llm-sandbox</a>、<a href=\"https://arxiv.org/abs/2410.23074\" target=\"_blank\" rel=\"noopener noreferrer\">https://arxiv.org/abs/2410.23074</a></p>\n</blockquote>\n<h2 id=\"操作步骤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#操作步骤\"><span>操作步骤</span></a></h2>\n<ol>\n<li>✅ 划分技能库并准备种子提示。</li>\n<li>⚠ 使用启发式规则收集和改写数据。</li>\n<li>❗ 使用强大模型生成答案并进行模型训练。</li>\n</ol>\n<h2 id=\"常见错误\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#常见错误\"><span>常见错误</span></a></h2>\n<blockquote>\n<p>警告：在数据合成过程中，忽视多样性可能导致模型过拟合。</p>\n</blockquote>\n<h2 id=\"💡-启发点\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#💡-启发点\"><span>💡 启发点</span></a></h2>\n<ul>\n<li>利用强大模型进行数据合成可以显著提升生成效果。</li>\n<li>数据质量过滤通过指令辨别能力提高整体数据集质量。</li>\n</ul>\n<h2 id=\"行动清单\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#行动清单\"><span>行动清单</span></a></h2>\n<ul>\n<li>研究更多启发式规则以优化 prompt 合成。</li>\n<li>探索自动化评估指令执行难度的方法。</li>\n<li>试验不同模型组合以优化训练效果。</li>\n</ul>\n<h2 id=\"📈-趋势预测\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#📈-趋势预测\"><span>📈 趋势预测</span></a></h2>\n<p>未来，随着大模型需求的增加，数据合成和质量过滤技术将会更加智能化和自动化，以支持更复杂的任务类型。</p>\n<h2 id=\"后续追踪\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#后续追踪\"><span>后续追踪</span></a></h2>\n<ul>\n<li>进一步探索自我指导的方式来评估指令难度。</li>\n<li>开发更高效的数据质量过滤算法。</li>\n</ul>\n</template>","contentStripped":"<p><strong>分类</strong>：数据科学<br>\n<strong>标签</strong>：数据合成、质量过滤、模型训练<br>\n<strong>日期</strong>：2023年10月25日</p>\n<h2 id=\"数据生产合成\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数据生产合成\"><span>数据生产合成</span></a></h2>\n<p>数据生产合成的核心在于通过多样化的 prompt（提示）设计来满足大模型在不同专项能力上的需求。这通常通过以下几种方法实现：\n<img src=\"/img/user/附件/Pasted image 20250410222852.png\" alt=\"Pasted image 20250410222852.png\"></p>\n<h3 id=\"生产合成-prompt\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#生产合成-prompt\"><span>生产合成 Prompt</span></a></h3>\n<ol>\n<li><strong>Self-Instruct 方法</strong>：将技能库划分为不同的任务类型（task_type），为每个类型准备一些种子提示（seed prompt）。然后随机选择种子，利用强大模型生成更多问题。</li>\n<li><strong>启发式规则合成</strong>：通过各种启发式规则收集不同任务类型的数据集，并进行适当改写。改写可以通过强大模型完成，生成不同格式和风格的 prompt。</li>\n</ol>\n<h3 id=\"生产合成-answer\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#生产合成-answer\"><span>生产合成 Answer</span></a></h3>\n<p>使用效果好的模型如 GPT-4 来生成答案是优选方案。对于成本敏感或中文数据为主的场景，可选择在本地部署模型如 Qwen_72B。</p>\n<h2 id=\"数据质量过滤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数据质量过滤\"><span>数据质量过滤</span></a></h2>\n<h3 id=\"ifd-过滤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ifd-过滤\"><span>IFD 过滤</span></a></h3>\n<p>数据质量过滤的关键在于根据指令跟踪难度筛选数据。初步训练阶段，模型通过内在的指令辨别能力评估数据集质量。</p>\n<p><img src=\"/img/user/附件/Pasted image 20250410222910.png\" alt=\"Pasted image 20250410222910.png\"></p>\n<h3 id=\"总体流程\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#总体流程\"><span>总体流程</span></a></h3>\n<ol>\n<li><strong>经验学习</strong>：从简单经验中学习，强迫模型首先熟悉目标数据集的一个子集。</li>\n<li><strong>多样性确保</strong>：在指令嵌入上使用 K-Means 聚类方法，确保初始模型遇到足够多样的指令。</li>\n</ol>\n<h2 id=\"思考\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#思考\"><span>思考</span></a></h2>\n<ul>\n<li>如何在数据合成过程中更高效地提高 prompt 的多样性？</li>\n<li>在数据质量过滤中，如何自动化评估指令执行难度？</li>\n<li>是否有其他更有效的方法来优化小模型的训练过程？</li>\n</ul>\n<blockquote>\n<p>原始出处：<a href=\"https://github.com/vndee/llm-sandbox\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/vndee/llm-sandbox</a>、<a href=\"https://arxiv.org/abs/2410.23074\" target=\"_blank\" rel=\"noopener noreferrer\">https://arxiv.org/abs/2410.23074</a></p>\n</blockquote>\n<h2 id=\"操作步骤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#操作步骤\"><span>操作步骤</span></a></h2>\n<ol>\n<li>✅ 划分技能库并准备种子提示。</li>\n<li>⚠ 使用启发式规则收集和改写数据。</li>\n<li>❗ 使用强大模型生成答案并进行模型训练。</li>\n</ol>\n<h2 id=\"常见错误\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#常见错误\"><span>常见错误</span></a></h2>\n<blockquote>\n<p>警告：在数据合成过程中，忽视多样性可能导致模型过拟合。</p>\n</blockquote>\n<h2 id=\"💡-启发点\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#💡-启发点\"><span>💡 启发点</span></a></h2>\n<ul>\n<li>利用强大模型进行数据合成可以显著提升生成效果。</li>\n<li>数据质量过滤通过指令辨别能力提高整体数据集质量。</li>\n</ul>\n<h2 id=\"行动清单\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#行动清单\"><span>行动清单</span></a></h2>\n<ul>\n<li>研究更多启发式规则以优化 prompt 合成。</li>\n<li>探索自动化评估指令执行难度的方法。</li>\n<li>试验不同模型组合以优化训练效果。</li>\n</ul>\n<h2 id=\"📈-趋势预测\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#📈-趋势预测\"><span>📈 趋势预测</span></a></h2>\n<p>未来，随着大模型需求的增加，数据合成和质量过滤技术将会更加智能化和自动化，以支持更复杂的任务类型。</p>\n<h2 id=\"后续追踪\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#后续追踪\"><span>后续追踪</span></a></h2>\n<ul>\n<li>进一步探索自我指导的方式来评估指令难度。</li>\n<li>开发更高效的数据质量过滤算法。</li>\n</ul>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"**分类**：数据科学  \n**标签**：数据合成、质量过滤、模型训练  \n**日期**：2023年10月25日\n\n\n\n## 数据生产合成\n数据生产合成的核心在于通过多样化的 prompt（提示）设计来满足大模型在不同专项能力上的需求。这通常通过以下几种方法实现：\n![Pasted image 20250410222852.png](/img/user/%E9%99%84%E4%BB%B6/Pasted%20image%2020250410222852.png)\n\n### 生产合成 Prompt\n1. **Self-Instruct 方法**：将技能库划分为不同的任务类型（task_type），为每个类型准备一些种子提示（seed prompt）。然后随机选择种子，利用强大模型生成更多问题。\n2. **启发式规则合成**：通过各种启发式规则收集不同任务类型的数据集，并进行适当改写。改写可以通过强大模型完成，生成不同格式和风格的 prompt。\n\n\n### 生产合成 Answer\n使用效果好的模型如 GPT-4 来生成答案是优选方案。对于成本敏感或中文数据为主的场景，可选择在本地部署模型如 Qwen_72B。\n\n\n\n## 数据质量过滤\n\n### IFD 过滤\n数据质量过滤的关键在于根据指令跟踪难度筛选数据。初步训练阶段，模型通过内在的指令辨别能力评估数据集质量。\n\n![Pasted image 20250410222910.png](/img/user/%E9%99%84%E4%BB%B6/Pasted%20image%2020250410222910.png)\n\n\n### 总体流程\n1. **经验学习**：从简单经验中学习，强迫模型首先熟悉目标数据集的一个子集。\n2. **多样性确保**：在指令嵌入上使用 K-Means 聚类方法，确保初始模型遇到足够多样的指令。\n\n\n\n## 思考\n- 如何在数据合成过程中更高效地提高 prompt 的多样性？\n- 在数据质量过滤中，如何自动化评估指令执行难度？\n- 是否有其他更有效的方法来优化小模型的训练过程？\n\n> 原始出处：[https://github.com/vndee/llm-sandbox](https://github.com/vndee/llm-sandbox)、[https://arxiv.org/abs/2410.23074](https://arxiv.org/abs/2410.23074)\n\n\n\n## 操作步骤\n1. ✅ 划分技能库并准备种子提示。\n2. ⚠ 使用启发式规则收集和改写数据。\n3. ❗ 使用强大模型生成答案并进行模型训练。\n\n\n\n## 常见错误\n> 警告：在数据合成过程中，忽视多样性可能导致模型过拟合。\n\n\n\n## 💡 启发点\n- 利用强大模型进行数据合成可以显著提升生成效果。\n- 数据质量过滤通过指令辨别能力提高整体数据集质量。\n\n\n\n## 行动清单\n- 研究更多启发式规则以优化 prompt 合成。\n- 探索自动化评估指令执行难度的方法。\n- 试验不同模型组合以优化训练效果。\n\n\n\n## 📈 趋势预测\n未来，随着大模型需求的增加，数据合成和质量过滤技术将会更加智能化和自动化，以支持更复杂的任务类型。\n\n\n\n## 后续追踪\n- 进一步探索自我指导的方式来评估指令难度。\n- 开发更高效的数据质量过滤算法。","excerpt":"","includedFiles":[],"tasklistId":0,"title":"","headers":[{"level":2,"title":"数据生产合成","slug":"数据生产合成","link":"#数据生产合成","children":[{"level":3,"title":"生产合成 Prompt","slug":"生产合成-prompt","link":"#生产合成-prompt","children":[]},{"level":3,"title":"生产合成 Answer","slug":"生产合成-answer","link":"#生产合成-answer","children":[]}]},{"level":2,"title":"数据质量过滤","slug":"数据质量过滤","link":"#数据质量过滤","children":[{"level":3,"title":"IFD 过滤","slug":"ifd-过滤","link":"#ifd-过滤","children":[]},{"level":3,"title":"总体流程","slug":"总体流程","link":"#总体流程","children":[]}]},{"level":2,"title":"思考","slug":"思考","link":"#思考","children":[]},{"level":2,"title":"操作步骤","slug":"操作步骤","link":"#操作步骤","children":[]},{"level":2,"title":"常见错误","slug":"常见错误","link":"#常见错误","children":[]},{"level":2,"title":"💡 启发点","slug":"💡-启发点","link":"#💡-启发点","children":[]},{"level":2,"title":"行动清单","slug":"行动清单","link":"#行动清单","children":[]},{"level":2,"title":"📈 趋势预测","slug":"📈-趋势预测","link":"#📈-趋势预测","children":[]},{"level":2,"title":"后续追踪","slug":"后续追踪","link":"#后续追踪","children":[]}]}}
