{"content":"<h2 id=\"å…ƒæ•°æ®\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å…ƒæ•°æ®\"><span>å…ƒæ•°æ®</span></a></h2>\n<ul>\n<li>åˆ†ç±»ï¼šæœºå™¨å­¦ä¹ ç®—æ³•</li>\n<li>æ ‡ç­¾ï¼šSARSA, å¼ºåŒ–å­¦ä¹ , æœºå™¨å­¦ä¹ , ä»·å€¼å‡½æ•°, è´ªå©ªç®—æ³•</li>\n<li>æ—¥æœŸï¼š2025å¹´4æœˆ12æ—¥</li>\n</ul>\n<h2 id=\"å†…å®¹æ¦‚è¿°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å†…å®¹æ¦‚è¿°\"><span>å†…å®¹æ¦‚è¿°</span></a></h2>\n<p>SARSAç®—æ³•æ˜¯ä¸€ç§ç”¨äºå¼ºåŒ–å­¦ä¹ çš„ç®—æ³•ï¼Œé€šè¿‡ä½¿ç”¨æ—¶é—´å·®åˆ†ï¼ˆTDï¼‰æ–¹æ³•æ¥ä¼°è®¡åŠ¨ä½œä»·å€¼å‡½æ•°ï¼Œå¹¶ç»“åˆ$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œï¼Œè¾¾åˆ°å¹³è¡¡æ¢ç´¢ä¸åˆ©ç”¨çš„ç›®çš„ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»SARSAç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ã€ç®—æ³•æµç¨‹ä»¥åŠPythonå®ç°ä»£ç ã€‚</p>\n<h2 id=\"æ ¸å¿ƒè§‚ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ ¸å¿ƒè§‚ç‚¹\"><span>æ ¸å¿ƒè§‚ç‚¹</span></a></h2>\n<p>SARSAç®—æ³•é€šè¿‡ä»¥ä¸‹å…¬å¼æ›´æ–°åŠ¨ä½œä»·å€¼å‡½æ•°ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo>â†</mo><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo>+</mo><mi>Î±</mi><mo stretchy=\"false\">[</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy=\"false\">)</mo><mo>âˆ’</mo><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Q(s_t, a_t) \\leftarrow Q(s_t, a_t) + \\alpha [r_t + \\gamma Q(s_{t+1}, a_{t+1}) - Q(s_t, a_t)]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">Î³</span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)]</span></span></span></span></span></p>\n<p>å…¶ä¸­ï¼Œ$$\\alpha$$ä¸ºå­¦ä¹ ç‡ï¼Œ$$\\gamma$$ä¸ºæŠ˜æ‰£å› å­ï¼Œ$$r_t$$ä¸ºå³æ—¶å¥–åŠ±ã€‚</p>\n<h3 id=\"é‡ç‚¹æ®µè½\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#é‡ç‚¹æ®µè½\"><span>é‡ç‚¹æ®µè½</span></a></h3>\n<ol>\n<li>\n<p><strong>è´ªå©ªç­–ç•¥ä¸æ¢ç´¢</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-error\" title=\"ParseError: KaTeX parse error: Can&#x27;t use function &#x27;$&#x27; in math mode at position 9: \\epsilon$Ì²$-è´ªå©ªç­–ç•¥åœ¨é€‰æ‹©åŠ¨ä½œæ—¶å…¼é¡¾æ¢â€¦\" style=\"color:#cc0000\">\\epsilon$$-è´ªå©ªç­–ç•¥åœ¨é€‰æ‹©åŠ¨ä½œæ—¶å…¼é¡¾æ¢ç´¢å’Œåˆ©ç”¨ã€‚è‹¥ä¸€ç›´é€‰æ‹©Qå€¼æœ€å¤§çš„åŠ¨ä½œï¼Œå¯èƒ½å¯¼è‡´å¯¹çŠ¶æ€ç©ºé—´çš„æ¢ç´¢ä¸è¶³ã€‚å› æ­¤ï¼Œå¼•å…¥ä¸€ä¸ªå°é‡$$\\epsilon$$æ¥æ§åˆ¶ä¸¤è€…çš„æ¯”ä¾‹ã€‚\n\n</span></p>\n</li>\n<li>\n<p><strong>SARSAç®—æ³•æµç¨‹</strong>ï¼š</p>\n<ul>\n<li>åˆå§‹åŒ–Qè¡¨æ ¼ã€‚</li>\n<li>å¯¹æ¯ä¸ªåºåˆ—è¿›è¡Œè¿­ä»£ï¼š\n<ul>\n<li>è·å–åˆå§‹çŠ¶æ€ã€‚</li>\n<li>æ ¹æ®$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œã€‚</li>\n<li>å¾ªç¯æ›´æ–°Qå€¼ï¼Œç›´åˆ°è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Pythonä»£ç å®ç°</strong>ï¼š</p>\n<div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Sarsa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sarsaç®—æ³• </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> __init__</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> ncol</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> nrow</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> epsilon</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> alpha</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> gamma</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_action</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">4</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">zeros</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">([</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">nrow </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> ncol</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_action</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # åˆå§‹åŒ–Q(s,a)è¡¨æ ¼</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">n_action </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_action </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># åŠ¨ä½œä¸ªæ•°</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">alpha </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> alpha </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># å­¦ä¹ ç‡</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">gamma </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> gamma </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># æŠ˜æ‰£å› å­</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">epsilon </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> epsilon </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># epsilon-è´ªå©ªç­–ç•¥ä¸­çš„å‚æ•°</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> take_action</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">random</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">random</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">epsilon</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            action </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">random</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">randint</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">n_action</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        else</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            action </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">argmax</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> action</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> update</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> s0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> r</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> s1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        td_error </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> r </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">+</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">gamma </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">s1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">s0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">s0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> +=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">alpha </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> td_error</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></li>\n</ol>\n<h3 id=\"æ“ä½œæ­¥éª¤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ“ä½œæ­¥éª¤\"><span>æ“ä½œæ­¥éª¤</span></a></h3>\n<ol>\n<li>âœ… åˆå§‹åŒ–Qè¡¨æ ¼ã€‚</li>\n<li>âš  æ ¹æ®$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œã€‚</li>\n<li>â— æ›´æ–°Qå€¼å¹¶æ ¹æ®ç¯å¢ƒåé¦ˆè°ƒæ•´çŠ¶æ€å’ŒåŠ¨ä½œã€‚</li>\n</ol>\n<h3 id=\"å¸¸è§é”™è¯¯\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¸¸è§é”™è¯¯\"><span>å¸¸è§é”™è¯¯</span></a></h3>\n<blockquote>\n<p>âš  åœ¨å®ç°SARSAç®—æ³•æ—¶ï¼Œå®¹æ˜“å¿½ç•¥$$\\epsilon$$çš„è°ƒæ•´ï¼Œå¯¼è‡´æ¢ç´¢ä¸è¶³æˆ–è¿‡åº¦æ¢ç´¢ã€‚</p>\n</blockquote>\n<h2 id=\"æ€è€ƒ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ€è€ƒ\"><span>æ€è€ƒ</span></a></h2>\n<ul>\n<li>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦‚ä½•åŠ¨æ€è°ƒæ•´$$\\epsilon$$ä»¥é€‚åº”ä¸åŒçš„ç¯å¢ƒï¼Ÿ</li>\n<li>SARSAä¸å…¶ä»–å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆå¦‚Q-learningï¼‰åœ¨æ”¶æ•›é€Ÿåº¦å’Œç¨³å®šæ€§ä¸Šæœ‰ä½•ä¸åŒï¼Ÿ</li>\n<li>å¦‚ä½•åœ¨å¤æ‚ç¯å¢ƒä¸­æœ‰æ•ˆåœ°æ‰©å±•SARSAç®—æ³•ï¼Ÿ</li>\n</ul>\n<blockquote>\n<p>æ¥æºï¼šæœ¬æ–‡å†…å®¹åŸºäºSARSAç®—æ³•çš„ç†è®ºä¸å®è·µç»éªŒæ€»ç»“ã€‚</p>\n</blockquote>\n<h2 id=\"ğŸ’¡å¯å‘ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ’¡å¯å‘ç‚¹\"><span>ğŸ’¡å¯å‘ç‚¹</span></a></h2>\n<p>SARSAç®—æ³•é€šè¿‡ç»“åˆTDæ–¹æ³•å’Œè´ªå©ªç­–ç•¥ï¼Œå®ç°äº†å¯¹æœªçŸ¥ç¯å¢ƒçš„æœ‰æ•ˆæ¢ç´¢å’Œåˆ©ç”¨ï¼Œè¿™æ˜¯å…¶åœ¨å¼ºåŒ–å­¦ä¹ ä¸­å¹¿æ³›åº”ç”¨çš„åŸºç¡€ã€‚</p>\n<h2 id=\"è¡ŒåŠ¨æ¸…å•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#è¡ŒåŠ¨æ¸…å•\"><span>è¡ŒåŠ¨æ¸…å•</span></a></h2>\n<ul class=\"task-list-container\">\n<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" id=\"task-item-0\" disabled=\"disabled\"><label class=\"task-list-item-label\" for=\"task-item-0\"> å®ç°SARSAç®—æ³•åœ¨ä¸åŒç¯å¢ƒä¸­çš„åº”ç”¨ã€‚</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" id=\"task-item-1\" disabled=\"disabled\"><label class=\"task-list-item-label\" for=\"task-item-1\"> æ¯”è¾ƒSARSAä¸Q-learningåœ¨ç›¸åŒä»»åŠ¡ä¸­çš„è¡¨ç°ã€‚</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" id=\"task-item-2\" disabled=\"disabled\"><label class=\"task-list-item-label\" for=\"task-item-2\"> æ¢ç´¢SARSAç®—æ³•åœ¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­çš„åº”ç”¨ã€‚</label></li>\n</ul>\n<h2 id=\"ğŸ“ˆè¶‹åŠ¿é¢„æµ‹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ“ˆè¶‹åŠ¿é¢„æµ‹\"><span>ğŸ“ˆè¶‹åŠ¿é¢„æµ‹</span></a></h2>\n<p>éšç€å¼ºåŒ–å­¦ä¹ åœ¨è‡ªåŠ¨é©¾é©¶ã€æœºå™¨äººç­‰é¢†åŸŸçš„åº”ç”¨å¢åŠ ï¼ŒSARSAç­‰ç®—æ³•å°†ä¸æ–­ä¼˜åŒ–ï¼Œä»¥é€‚åº”æ›´å¤æ‚çš„å†³ç­–ç¯å¢ƒã€‚</p>\n<h2 id=\"åç»­è¿½è¸ª\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åç»­è¿½è¸ª\"><span>åç»­è¿½è¸ª</span></a></h2>\n<ul>\n<li>æ¢ç´¢SARSAä¸æ·±åº¦å­¦ä¹ ç»“åˆçš„å¯èƒ½æ€§ã€‚</li>\n<li>ç ”ç©¶ä¸åŒå‚æ•°è®¾ç½®å¯¹SARSAç®—æ³•æ”¶æ•›æ€§çš„å½±å“ã€‚</li>\n</ul>\n","env":{"base":"/","filePath":"/Users/qianyuhe/Desktop/my-project/docs/notes_bak/å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /RLå¼ºåŒ–å­¦ä¹ åŸºç¡€/SARSAç®—æ³•.md","filePathRelative":"notes_bak/å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /RLå¼ºåŒ–å­¦ä¹ åŸºç¡€/SARSAç®—æ³•.md","frontmatter":{"dg-publish":true,"dg-permalink":"/å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /RLå¼ºåŒ–å­¦ä¹ åŸºç¡€/SARSAç®—æ³•","dg-home":false,"dg-description":"åœ¨æ­¤è¾“å…¥ç¬”è®°çš„æè¿°","dg-hide":false,"dg-hide-title":false,"dg-show-backlinks":true,"dg-show-local-graph":true,"dg-show-inline-title":true,"dg-pinned":false,"dg-passphrase":"åœ¨æ­¤è¾“å…¥è®¿é—®å¯†ç ","dg-enable-mathjax":false,"dg-enable-mermaid":false,"dg-enable-uml":false,"dg-note-icon":0,"dg-enable-dataview":false,"tags":["NLP"],"permalink":"/å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /RLå¼ºåŒ–å­¦ä¹ åŸºç¡€/SARSAç®—æ³•/","dgShowBacklinks":true,"dgShowLocalGraph":true,"dgShowInlineTitle":true,"dgPassFrontmatter":true,"noteIcon":0,"created":"2025-04-11T05:36:20.000Z","updated":"2025-04-13T05:06:02.000Z","title":"SARSAç®—æ³•","createTime":"2025/05/13 17:33:52"},"sfcBlocks":{"template":{"type":"template","content":"<template><h2 id=\"å…ƒæ•°æ®\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å…ƒæ•°æ®\"><span>å…ƒæ•°æ®</span></a></h2>\n<ul>\n<li>åˆ†ç±»ï¼šæœºå™¨å­¦ä¹ ç®—æ³•</li>\n<li>æ ‡ç­¾ï¼šSARSA, å¼ºåŒ–å­¦ä¹ , æœºå™¨å­¦ä¹ , ä»·å€¼å‡½æ•°, è´ªå©ªç®—æ³•</li>\n<li>æ—¥æœŸï¼š2025å¹´4æœˆ12æ—¥</li>\n</ul>\n<h2 id=\"å†…å®¹æ¦‚è¿°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å†…å®¹æ¦‚è¿°\"><span>å†…å®¹æ¦‚è¿°</span></a></h2>\n<p>SARSAç®—æ³•æ˜¯ä¸€ç§ç”¨äºå¼ºåŒ–å­¦ä¹ çš„ç®—æ³•ï¼Œé€šè¿‡ä½¿ç”¨æ—¶é—´å·®åˆ†ï¼ˆTDï¼‰æ–¹æ³•æ¥ä¼°è®¡åŠ¨ä½œä»·å€¼å‡½æ•°ï¼Œå¹¶ç»“åˆ$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œï¼Œè¾¾åˆ°å¹³è¡¡æ¢ç´¢ä¸åˆ©ç”¨çš„ç›®çš„ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»SARSAç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ã€ç®—æ³•æµç¨‹ä»¥åŠPythonå®ç°ä»£ç ã€‚</p>\n<h2 id=\"æ ¸å¿ƒè§‚ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ ¸å¿ƒè§‚ç‚¹\"><span>æ ¸å¿ƒè§‚ç‚¹</span></a></h2>\n<p>SARSAç®—æ³•é€šè¿‡ä»¥ä¸‹å…¬å¼æ›´æ–°åŠ¨ä½œä»·å€¼å‡½æ•°ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo>â†</mo><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo>+</mo><mi>Î±</mi><mo stretchy=\"false\">[</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy=\"false\">)</mo><mo>âˆ’</mo><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Q(s_t, a_t) \\leftarrow Q(s_t, a_t) + \\alpha [r_t + \\gamma Q(s_{t+1}, a_{t+1}) - Q(s_t, a_t)]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">Î³</span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)]</span></span></span></span></span></p>\n<p>å…¶ä¸­ï¼Œ$$\\alpha$$ä¸ºå­¦ä¹ ç‡ï¼Œ$$\\gamma$$ä¸ºæŠ˜æ‰£å› å­ï¼Œ$$r_t$$ä¸ºå³æ—¶å¥–åŠ±ã€‚</p>\n<h3 id=\"é‡ç‚¹æ®µè½\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#é‡ç‚¹æ®µè½\"><span>é‡ç‚¹æ®µè½</span></a></h3>\n<ol>\n<li>\n<p><strong>è´ªå©ªç­–ç•¥ä¸æ¢ç´¢</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-error\" title=\"ParseError: KaTeX parse error: Can&#x27;t use function &#x27;$&#x27; in math mode at position 9: \\epsilon$Ì²$-è´ªå©ªç­–ç•¥åœ¨é€‰æ‹©åŠ¨ä½œæ—¶å…¼é¡¾æ¢â€¦\" style=\"color:#cc0000\">\\epsilon$$-è´ªå©ªç­–ç•¥åœ¨é€‰æ‹©åŠ¨ä½œæ—¶å…¼é¡¾æ¢ç´¢å’Œåˆ©ç”¨ã€‚è‹¥ä¸€ç›´é€‰æ‹©Qå€¼æœ€å¤§çš„åŠ¨ä½œï¼Œå¯èƒ½å¯¼è‡´å¯¹çŠ¶æ€ç©ºé—´çš„æ¢ç´¢ä¸è¶³ã€‚å› æ­¤ï¼Œå¼•å…¥ä¸€ä¸ªå°é‡$$\\epsilon$$æ¥æ§åˆ¶ä¸¤è€…çš„æ¯”ä¾‹ã€‚\n\n</span></p>\n</li>\n<li>\n<p><strong>SARSAç®—æ³•æµç¨‹</strong>ï¼š</p>\n<ul>\n<li>åˆå§‹åŒ–Qè¡¨æ ¼ã€‚</li>\n<li>å¯¹æ¯ä¸ªåºåˆ—è¿›è¡Œè¿­ä»£ï¼š\n<ul>\n<li>è·å–åˆå§‹çŠ¶æ€ã€‚</li>\n<li>æ ¹æ®$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œã€‚</li>\n<li>å¾ªç¯æ›´æ–°Qå€¼ï¼Œç›´åˆ°è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Pythonä»£ç å®ç°</strong>ï¼š</p>\n<div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Sarsa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sarsaç®—æ³• </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> __init__</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> ncol</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> nrow</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> epsilon</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> alpha</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> gamma</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_action</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">4</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">zeros</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">([</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">nrow </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> ncol</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_action</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # åˆå§‹åŒ–Q(s,a)è¡¨æ ¼</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">n_action </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_action </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># åŠ¨ä½œä¸ªæ•°</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">alpha </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> alpha </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># å­¦ä¹ ç‡</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">gamma </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> gamma </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># æŠ˜æ‰£å› å­</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">epsilon </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> epsilon </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># epsilon-è´ªå©ªç­–ç•¥ä¸­çš„å‚æ•°</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> take_action</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">random</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">random</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">epsilon</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            action </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">random</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">randint</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">n_action</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        else</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            action </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">argmax</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> action</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> update</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> s0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> r</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> s1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        td_error </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> r </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">+</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">gamma </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">s1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">s0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">s0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> +=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">alpha </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> td_error</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></li>\n</ol>\n<h3 id=\"æ“ä½œæ­¥éª¤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ“ä½œæ­¥éª¤\"><span>æ“ä½œæ­¥éª¤</span></a></h3>\n<ol>\n<li>âœ… åˆå§‹åŒ–Qè¡¨æ ¼ã€‚</li>\n<li>âš  æ ¹æ®$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œã€‚</li>\n<li>â— æ›´æ–°Qå€¼å¹¶æ ¹æ®ç¯å¢ƒåé¦ˆè°ƒæ•´çŠ¶æ€å’ŒåŠ¨ä½œã€‚</li>\n</ol>\n<h3 id=\"å¸¸è§é”™è¯¯\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¸¸è§é”™è¯¯\"><span>å¸¸è§é”™è¯¯</span></a></h3>\n<blockquote>\n<p>âš  åœ¨å®ç°SARSAç®—æ³•æ—¶ï¼Œå®¹æ˜“å¿½ç•¥$$\\epsilon$$çš„è°ƒæ•´ï¼Œå¯¼è‡´æ¢ç´¢ä¸è¶³æˆ–è¿‡åº¦æ¢ç´¢ã€‚</p>\n</blockquote>\n<h2 id=\"æ€è€ƒ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ€è€ƒ\"><span>æ€è€ƒ</span></a></h2>\n<ul>\n<li>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦‚ä½•åŠ¨æ€è°ƒæ•´$$\\epsilon$$ä»¥é€‚åº”ä¸åŒçš„ç¯å¢ƒï¼Ÿ</li>\n<li>SARSAä¸å…¶ä»–å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆå¦‚Q-learningï¼‰åœ¨æ”¶æ•›é€Ÿåº¦å’Œç¨³å®šæ€§ä¸Šæœ‰ä½•ä¸åŒï¼Ÿ</li>\n<li>å¦‚ä½•åœ¨å¤æ‚ç¯å¢ƒä¸­æœ‰æ•ˆåœ°æ‰©å±•SARSAç®—æ³•ï¼Ÿ</li>\n</ul>\n<blockquote>\n<p>æ¥æºï¼šæœ¬æ–‡å†…å®¹åŸºäºSARSAç®—æ³•çš„ç†è®ºä¸å®è·µç»éªŒæ€»ç»“ã€‚</p>\n</blockquote>\n<h2 id=\"ğŸ’¡å¯å‘ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ’¡å¯å‘ç‚¹\"><span>ğŸ’¡å¯å‘ç‚¹</span></a></h2>\n<p>SARSAç®—æ³•é€šè¿‡ç»“åˆTDæ–¹æ³•å’Œè´ªå©ªç­–ç•¥ï¼Œå®ç°äº†å¯¹æœªçŸ¥ç¯å¢ƒçš„æœ‰æ•ˆæ¢ç´¢å’Œåˆ©ç”¨ï¼Œè¿™æ˜¯å…¶åœ¨å¼ºåŒ–å­¦ä¹ ä¸­å¹¿æ³›åº”ç”¨çš„åŸºç¡€ã€‚</p>\n<h2 id=\"è¡ŒåŠ¨æ¸…å•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#è¡ŒåŠ¨æ¸…å•\"><span>è¡ŒåŠ¨æ¸…å•</span></a></h2>\n<ul class=\"task-list-container\">\n<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" id=\"task-item-0\" disabled=\"disabled\"><label class=\"task-list-item-label\" for=\"task-item-0\"> å®ç°SARSAç®—æ³•åœ¨ä¸åŒç¯å¢ƒä¸­çš„åº”ç”¨ã€‚</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" id=\"task-item-1\" disabled=\"disabled\"><label class=\"task-list-item-label\" for=\"task-item-1\"> æ¯”è¾ƒSARSAä¸Q-learningåœ¨ç›¸åŒä»»åŠ¡ä¸­çš„è¡¨ç°ã€‚</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" id=\"task-item-2\" disabled=\"disabled\"><label class=\"task-list-item-label\" for=\"task-item-2\"> æ¢ç´¢SARSAç®—æ³•åœ¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­çš„åº”ç”¨ã€‚</label></li>\n</ul>\n<h2 id=\"ğŸ“ˆè¶‹åŠ¿é¢„æµ‹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ“ˆè¶‹åŠ¿é¢„æµ‹\"><span>ğŸ“ˆè¶‹åŠ¿é¢„æµ‹</span></a></h2>\n<p>éšç€å¼ºåŒ–å­¦ä¹ åœ¨è‡ªåŠ¨é©¾é©¶ã€æœºå™¨äººç­‰é¢†åŸŸçš„åº”ç”¨å¢åŠ ï¼ŒSARSAç­‰ç®—æ³•å°†ä¸æ–­ä¼˜åŒ–ï¼Œä»¥é€‚åº”æ›´å¤æ‚çš„å†³ç­–ç¯å¢ƒã€‚</p>\n<h2 id=\"åç»­è¿½è¸ª\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åç»­è¿½è¸ª\"><span>åç»­è¿½è¸ª</span></a></h2>\n<ul>\n<li>æ¢ç´¢SARSAä¸æ·±åº¦å­¦ä¹ ç»“åˆçš„å¯èƒ½æ€§ã€‚</li>\n<li>ç ”ç©¶ä¸åŒå‚æ•°è®¾ç½®å¯¹SARSAç®—æ³•æ”¶æ•›æ€§çš„å½±å“ã€‚</li>\n</ul>\n</template>","contentStripped":"<h2 id=\"å…ƒæ•°æ®\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å…ƒæ•°æ®\"><span>å…ƒæ•°æ®</span></a></h2>\n<ul>\n<li>åˆ†ç±»ï¼šæœºå™¨å­¦ä¹ ç®—æ³•</li>\n<li>æ ‡ç­¾ï¼šSARSA, å¼ºåŒ–å­¦ä¹ , æœºå™¨å­¦ä¹ , ä»·å€¼å‡½æ•°, è´ªå©ªç®—æ³•</li>\n<li>æ—¥æœŸï¼š2025å¹´4æœˆ12æ—¥</li>\n</ul>\n<h2 id=\"å†…å®¹æ¦‚è¿°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å†…å®¹æ¦‚è¿°\"><span>å†…å®¹æ¦‚è¿°</span></a></h2>\n<p>SARSAç®—æ³•æ˜¯ä¸€ç§ç”¨äºå¼ºåŒ–å­¦ä¹ çš„ç®—æ³•ï¼Œé€šè¿‡ä½¿ç”¨æ—¶é—´å·®åˆ†ï¼ˆTDï¼‰æ–¹æ³•æ¥ä¼°è®¡åŠ¨ä½œä»·å€¼å‡½æ•°ï¼Œå¹¶ç»“åˆ$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œï¼Œè¾¾åˆ°å¹³è¡¡æ¢ç´¢ä¸åˆ©ç”¨çš„ç›®çš„ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»SARSAç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ã€ç®—æ³•æµç¨‹ä»¥åŠPythonå®ç°ä»£ç ã€‚</p>\n<h2 id=\"æ ¸å¿ƒè§‚ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ ¸å¿ƒè§‚ç‚¹\"><span>æ ¸å¿ƒè§‚ç‚¹</span></a></h2>\n<p>SARSAç®—æ³•é€šè¿‡ä»¥ä¸‹å…¬å¼æ›´æ–°åŠ¨ä½œä»·å€¼å‡½æ•°ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo>â†</mo><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo>+</mo><mi>Î±</mi><mo stretchy=\"false\">[</mo><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>Î³</mi><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy=\"false\">)</mo><mo>âˆ’</mo><mi>Q</mi><mo stretchy=\"false\">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">Q(s_t, a_t) \\leftarrow Q(s_t, a_t) + \\alpha [r_t + \\gamma Q(s_{t+1}, a_{t+1}) - Q(s_t, a_t)]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">Î³</span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)]</span></span></span></span></span></p>\n<p>å…¶ä¸­ï¼Œ$$\\alpha$$ä¸ºå­¦ä¹ ç‡ï¼Œ$$\\gamma$$ä¸ºæŠ˜æ‰£å› å­ï¼Œ$$r_t$$ä¸ºå³æ—¶å¥–åŠ±ã€‚</p>\n<h3 id=\"é‡ç‚¹æ®µè½\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#é‡ç‚¹æ®µè½\"><span>é‡ç‚¹æ®µè½</span></a></h3>\n<ol>\n<li>\n<p><strong>è´ªå©ªç­–ç•¥ä¸æ¢ç´¢</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-error\" title=\"ParseError: KaTeX parse error: Can&#x27;t use function &#x27;$&#x27; in math mode at position 9: \\epsilon$Ì²$-è´ªå©ªç­–ç•¥åœ¨é€‰æ‹©åŠ¨ä½œæ—¶å…¼é¡¾æ¢â€¦\" style=\"color:#cc0000\">\\epsilon$$-è´ªå©ªç­–ç•¥åœ¨é€‰æ‹©åŠ¨ä½œæ—¶å…¼é¡¾æ¢ç´¢å’Œåˆ©ç”¨ã€‚è‹¥ä¸€ç›´é€‰æ‹©Qå€¼æœ€å¤§çš„åŠ¨ä½œï¼Œå¯èƒ½å¯¼è‡´å¯¹çŠ¶æ€ç©ºé—´çš„æ¢ç´¢ä¸è¶³ã€‚å› æ­¤ï¼Œå¼•å…¥ä¸€ä¸ªå°é‡$$\\epsilon$$æ¥æ§åˆ¶ä¸¤è€…çš„æ¯”ä¾‹ã€‚\n\n</span></p>\n</li>\n<li>\n<p><strong>SARSAç®—æ³•æµç¨‹</strong>ï¼š</p>\n<ul>\n<li>åˆå§‹åŒ–Qè¡¨æ ¼ã€‚</li>\n<li>å¯¹æ¯ä¸ªåºåˆ—è¿›è¡Œè¿­ä»£ï¼š\n<ul>\n<li>è·å–åˆå§‹çŠ¶æ€ã€‚</li>\n<li>æ ¹æ®$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œã€‚</li>\n<li>å¾ªç¯æ›´æ–°Qå€¼ï¼Œç›´åˆ°è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Pythonä»£ç å®ç°</strong>ï¼š</p>\n<div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Sarsa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sarsaç®—æ³• </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> __init__</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> ncol</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> nrow</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> epsilon</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> alpha</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> gamma</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_action</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">4</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">zeros</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">([</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">nrow </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> ncol</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_action</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # åˆå§‹åŒ–Q(s,a)è¡¨æ ¼</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">n_action </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_action </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># åŠ¨ä½œä¸ªæ•°</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">alpha </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> alpha </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># å­¦ä¹ ç‡</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">gamma </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> gamma </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># æŠ˜æ‰£å› å­</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">epsilon </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> epsilon </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># epsilon-è´ªå©ªç­–ç•¥ä¸­çš„å‚æ•°</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> take_action</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">random</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">random</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">epsilon</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            action </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">random</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">randint</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">n_action</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        else</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            action </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">argmax</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> action</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> update</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> s0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> r</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> s1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        td_error </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> r </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">+</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">gamma </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">s1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">s0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Q_table</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">s0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> a0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> +=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">alpha </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> td_error</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></li>\n</ol>\n<h3 id=\"æ“ä½œæ­¥éª¤\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ“ä½œæ­¥éª¤\"><span>æ“ä½œæ­¥éª¤</span></a></h3>\n<ol>\n<li>âœ… åˆå§‹åŒ–Qè¡¨æ ¼ã€‚</li>\n<li>âš  æ ¹æ®$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œã€‚</li>\n<li>â— æ›´æ–°Qå€¼å¹¶æ ¹æ®ç¯å¢ƒåé¦ˆè°ƒæ•´çŠ¶æ€å’ŒåŠ¨ä½œã€‚</li>\n</ol>\n<h3 id=\"å¸¸è§é”™è¯¯\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¸¸è§é”™è¯¯\"><span>å¸¸è§é”™è¯¯</span></a></h3>\n<blockquote>\n<p>âš  åœ¨å®ç°SARSAç®—æ³•æ—¶ï¼Œå®¹æ˜“å¿½ç•¥$$\\epsilon$$çš„è°ƒæ•´ï¼Œå¯¼è‡´æ¢ç´¢ä¸è¶³æˆ–è¿‡åº¦æ¢ç´¢ã€‚</p>\n</blockquote>\n<h2 id=\"æ€è€ƒ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ€è€ƒ\"><span>æ€è€ƒ</span></a></h2>\n<ul>\n<li>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦‚ä½•åŠ¨æ€è°ƒæ•´$$\\epsilon$$ä»¥é€‚åº”ä¸åŒçš„ç¯å¢ƒï¼Ÿ</li>\n<li>SARSAä¸å…¶ä»–å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆå¦‚Q-learningï¼‰åœ¨æ”¶æ•›é€Ÿåº¦å’Œç¨³å®šæ€§ä¸Šæœ‰ä½•ä¸åŒï¼Ÿ</li>\n<li>å¦‚ä½•åœ¨å¤æ‚ç¯å¢ƒä¸­æœ‰æ•ˆåœ°æ‰©å±•SARSAç®—æ³•ï¼Ÿ</li>\n</ul>\n<blockquote>\n<p>æ¥æºï¼šæœ¬æ–‡å†…å®¹åŸºäºSARSAç®—æ³•çš„ç†è®ºä¸å®è·µç»éªŒæ€»ç»“ã€‚</p>\n</blockquote>\n<h2 id=\"ğŸ’¡å¯å‘ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ’¡å¯å‘ç‚¹\"><span>ğŸ’¡å¯å‘ç‚¹</span></a></h2>\n<p>SARSAç®—æ³•é€šè¿‡ç»“åˆTDæ–¹æ³•å’Œè´ªå©ªç­–ç•¥ï¼Œå®ç°äº†å¯¹æœªçŸ¥ç¯å¢ƒçš„æœ‰æ•ˆæ¢ç´¢å’Œåˆ©ç”¨ï¼Œè¿™æ˜¯å…¶åœ¨å¼ºåŒ–å­¦ä¹ ä¸­å¹¿æ³›åº”ç”¨çš„åŸºç¡€ã€‚</p>\n<h2 id=\"è¡ŒåŠ¨æ¸…å•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#è¡ŒåŠ¨æ¸…å•\"><span>è¡ŒåŠ¨æ¸…å•</span></a></h2>\n<ul class=\"task-list-container\">\n<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" id=\"task-item-0\" disabled=\"disabled\"><label class=\"task-list-item-label\" for=\"task-item-0\"> å®ç°SARSAç®—æ³•åœ¨ä¸åŒç¯å¢ƒä¸­çš„åº”ç”¨ã€‚</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" id=\"task-item-1\" disabled=\"disabled\"><label class=\"task-list-item-label\" for=\"task-item-1\"> æ¯”è¾ƒSARSAä¸Q-learningåœ¨ç›¸åŒä»»åŠ¡ä¸­çš„è¡¨ç°ã€‚</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" id=\"task-item-2\" disabled=\"disabled\"><label class=\"task-list-item-label\" for=\"task-item-2\"> æ¢ç´¢SARSAç®—æ³•åœ¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­çš„åº”ç”¨ã€‚</label></li>\n</ul>\n<h2 id=\"ğŸ“ˆè¶‹åŠ¿é¢„æµ‹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ“ˆè¶‹åŠ¿é¢„æµ‹\"><span>ğŸ“ˆè¶‹åŠ¿é¢„æµ‹</span></a></h2>\n<p>éšç€å¼ºåŒ–å­¦ä¹ åœ¨è‡ªåŠ¨é©¾é©¶ã€æœºå™¨äººç­‰é¢†åŸŸçš„åº”ç”¨å¢åŠ ï¼ŒSARSAç­‰ç®—æ³•å°†ä¸æ–­ä¼˜åŒ–ï¼Œä»¥é€‚åº”æ›´å¤æ‚çš„å†³ç­–ç¯å¢ƒã€‚</p>\n<h2 id=\"åç»­è¿½è¸ª\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åç»­è¿½è¸ª\"><span>åç»­è¿½è¸ª</span></a></h2>\n<ul>\n<li>æ¢ç´¢SARSAä¸æ·±åº¦å­¦ä¹ ç»“åˆçš„å¯èƒ½æ€§ã€‚</li>\n<li>ç ”ç©¶ä¸åŒå‚æ•°è®¾ç½®å¯¹SARSAç®—æ³•æ”¶æ•›æ€§çš„å½±å“ã€‚</li>\n</ul>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n## å…ƒæ•°æ®\n- åˆ†ç±»ï¼šæœºå™¨å­¦ä¹ ç®—æ³•\n- æ ‡ç­¾ï¼šSARSA, å¼ºåŒ–å­¦ä¹ , æœºå™¨å­¦ä¹ , ä»·å€¼å‡½æ•°, è´ªå©ªç®—æ³•\n- æ—¥æœŸï¼š2025å¹´4æœˆ12æ—¥\n\n\n## å†…å®¹æ¦‚è¿°\nSARSAç®—æ³•æ˜¯ä¸€ç§ç”¨äºå¼ºåŒ–å­¦ä¹ çš„ç®—æ³•ï¼Œé€šè¿‡ä½¿ç”¨æ—¶é—´å·®åˆ†ï¼ˆTDï¼‰æ–¹æ³•æ¥ä¼°è®¡åŠ¨ä½œä»·å€¼å‡½æ•°ï¼Œå¹¶ç»“åˆ$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œï¼Œè¾¾åˆ°å¹³è¡¡æ¢ç´¢ä¸åˆ©ç”¨çš„ç›®çš„ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»SARSAç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ã€ç®—æ³•æµç¨‹ä»¥åŠPythonå®ç°ä»£ç ã€‚\n\n\n## æ ¸å¿ƒè§‚ç‚¹\nSARSAç®—æ³•é€šè¿‡ä»¥ä¸‹å…¬å¼æ›´æ–°åŠ¨ä½œä»·å€¼å‡½æ•°ï¼š\n$$\nQ(s_t, a_t) \\leftarrow Q(s_t, a_t) + \\alpha [r_t + \\gamma Q(s_{t+1}, a_{t+1}) - Q(s_t, a_t)]\n$$\n\nå…¶ä¸­ï¼Œ$$\\alpha$$ä¸ºå­¦ä¹ ç‡ï¼Œ$$\\gamma$$ä¸ºæŠ˜æ‰£å› å­ï¼Œ$$r_t$$ä¸ºå³æ—¶å¥–åŠ±ã€‚\n\n### é‡ç‚¹æ®µè½\n1. **è´ªå©ªç­–ç•¥ä¸æ¢ç´¢**ï¼š\n   $$\\epsilon$$-è´ªå©ªç­–ç•¥åœ¨é€‰æ‹©åŠ¨ä½œæ—¶å…¼é¡¾æ¢ç´¢å’Œåˆ©ç”¨ã€‚è‹¥ä¸€ç›´é€‰æ‹©Qå€¼æœ€å¤§çš„åŠ¨ä½œï¼Œå¯èƒ½å¯¼è‡´å¯¹çŠ¶æ€ç©ºé—´çš„æ¢ç´¢ä¸è¶³ã€‚å› æ­¤ï¼Œå¼•å…¥ä¸€ä¸ªå°é‡$$\\epsilon$$æ¥æ§åˆ¶ä¸¤è€…çš„æ¯”ä¾‹ã€‚\n\n2. **SARSAç®—æ³•æµç¨‹**ï¼š\n   - åˆå§‹åŒ–Qè¡¨æ ¼ã€‚\n   - å¯¹æ¯ä¸ªåºåˆ—è¿›è¡Œè¿­ä»£ï¼š\n     - è·å–åˆå§‹çŠ¶æ€ã€‚\n     - æ ¹æ®$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œã€‚\n     - å¾ªç¯æ›´æ–°Qå€¼ï¼Œç›´åˆ°è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ã€‚\n\n3. **Pythonä»£ç å®ç°**ï¼š\n   ```python\n   class Sarsa:\n       \"\"\" Sarsaç®—æ³• \"\"\"\n       def __init__(self, ncol, nrow, epsilon, alpha, gamma, n_action=4):\n           self.Q_table = np.zeros([nrow * ncol, n_action]) # åˆå§‹åŒ–Q(s,a)è¡¨æ ¼\n           self.n_action = n_action # åŠ¨ä½œä¸ªæ•°\n           self.alpha = alpha # å­¦ä¹ ç‡\n           self.gamma = gamma # æŠ˜æ‰£å› å­\n           self.epsilon = epsilon # epsilon-è´ªå©ªç­–ç•¥ä¸­çš„å‚æ•°\n\n       def take_action(self, state):\n           if np.random.random() < self.epsilon:\n               action = np.random.randint(self.n_action)\n           else:\n               action = np.argmax(self.Q_table[state])\n           return action\n\n       def update(self, s0, a0, r, s1, a1):\n           td_error = r + self.gamma * self.Q_table[s1, a1] - self.Q_table[s0, a0]\n           self.Q_table[s0, a0] += self.alpha * td_error\n   ```\n\n\n### æ“ä½œæ­¥éª¤\n1. âœ… åˆå§‹åŒ–Qè¡¨æ ¼ã€‚\n2. âš  æ ¹æ®$$\\epsilon$$-è´ªå©ªç­–ç•¥é€‰æ‹©åŠ¨ä½œã€‚\n3. â— æ›´æ–°Qå€¼å¹¶æ ¹æ®ç¯å¢ƒåé¦ˆè°ƒæ•´çŠ¶æ€å’ŒåŠ¨ä½œã€‚\n\n\n### å¸¸è§é”™è¯¯\n> âš  åœ¨å®ç°SARSAç®—æ³•æ—¶ï¼Œå®¹æ˜“å¿½ç•¥$$\\epsilon$$çš„è°ƒæ•´ï¼Œå¯¼è‡´æ¢ç´¢ä¸è¶³æˆ–è¿‡åº¦æ¢ç´¢ã€‚\n\n\n## æ€è€ƒ\n- åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦‚ä½•åŠ¨æ€è°ƒæ•´$$\\epsilon$$ä»¥é€‚åº”ä¸åŒçš„ç¯å¢ƒï¼Ÿ\n- SARSAä¸å…¶ä»–å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆå¦‚Q-learningï¼‰åœ¨æ”¶æ•›é€Ÿåº¦å’Œç¨³å®šæ€§ä¸Šæœ‰ä½•ä¸åŒï¼Ÿ\n- å¦‚ä½•åœ¨å¤æ‚ç¯å¢ƒä¸­æœ‰æ•ˆåœ°æ‰©å±•SARSAç®—æ³•ï¼Ÿ\n\n> æ¥æºï¼šæœ¬æ–‡å†…å®¹åŸºäºSARSAç®—æ³•çš„ç†è®ºä¸å®è·µç»éªŒæ€»ç»“ã€‚\n\n\n## ğŸ’¡å¯å‘ç‚¹\nSARSAç®—æ³•é€šè¿‡ç»“åˆTDæ–¹æ³•å’Œè´ªå©ªç­–ç•¥ï¼Œå®ç°äº†å¯¹æœªçŸ¥ç¯å¢ƒçš„æœ‰æ•ˆæ¢ç´¢å’Œåˆ©ç”¨ï¼Œè¿™æ˜¯å…¶åœ¨å¼ºåŒ–å­¦ä¹ ä¸­å¹¿æ³›åº”ç”¨çš„åŸºç¡€ã€‚\n\n\n## è¡ŒåŠ¨æ¸…å•\n- [ ] å®ç°SARSAç®—æ³•åœ¨ä¸åŒç¯å¢ƒä¸­çš„åº”ç”¨ã€‚\n- [ ] æ¯”è¾ƒSARSAä¸Q-learningåœ¨ç›¸åŒä»»åŠ¡ä¸­çš„è¡¨ç°ã€‚\n- [ ] æ¢ç´¢SARSAç®—æ³•åœ¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­çš„åº”ç”¨ã€‚\n\n\n## ğŸ“ˆè¶‹åŠ¿é¢„æµ‹\néšç€å¼ºåŒ–å­¦ä¹ åœ¨è‡ªåŠ¨é©¾é©¶ã€æœºå™¨äººç­‰é¢†åŸŸçš„åº”ç”¨å¢åŠ ï¼ŒSARSAç­‰ç®—æ³•å°†ä¸æ–­ä¼˜åŒ–ï¼Œä»¥é€‚åº”æ›´å¤æ‚çš„å†³ç­–ç¯å¢ƒã€‚\n\n\n## åç»­è¿½è¸ª\n- æ¢ç´¢SARSAä¸æ·±åº¦å­¦ä¹ ç»“åˆçš„å¯èƒ½æ€§ã€‚\n- ç ”ç©¶ä¸åŒå‚æ•°è®¾ç½®å¯¹SARSAç®—æ³•æ”¶æ•›æ€§çš„å½±å“ã€‚","excerpt":"","includedFiles":[],"tasklistId":3,"title":"","headers":[{"level":2,"title":"å…ƒæ•°æ®","slug":"å…ƒæ•°æ®","link":"#å…ƒæ•°æ®","children":[]},{"level":2,"title":"å†…å®¹æ¦‚è¿°","slug":"å†…å®¹æ¦‚è¿°","link":"#å†…å®¹æ¦‚è¿°","children":[]},{"level":2,"title":"æ ¸å¿ƒè§‚ç‚¹","slug":"æ ¸å¿ƒè§‚ç‚¹","link":"#æ ¸å¿ƒè§‚ç‚¹","children":[{"level":3,"title":"é‡ç‚¹æ®µè½","slug":"é‡ç‚¹æ®µè½","link":"#é‡ç‚¹æ®µè½","children":[]},{"level":3,"title":"æ“ä½œæ­¥éª¤","slug":"æ“ä½œæ­¥éª¤","link":"#æ“ä½œæ­¥éª¤","children":[]},{"level":3,"title":"å¸¸è§é”™è¯¯","slug":"å¸¸è§é”™è¯¯","link":"#å¸¸è§é”™è¯¯","children":[]}]},{"level":2,"title":"æ€è€ƒ","slug":"æ€è€ƒ","link":"#æ€è€ƒ","children":[]},{"level":2,"title":"ğŸ’¡å¯å‘ç‚¹","slug":"ğŸ’¡å¯å‘ç‚¹","link":"#ğŸ’¡å¯å‘ç‚¹","children":[]},{"level":2,"title":"è¡ŒåŠ¨æ¸…å•","slug":"è¡ŒåŠ¨æ¸…å•","link":"#è¡ŒåŠ¨æ¸…å•","children":[]},{"level":2,"title":"ğŸ“ˆè¶‹åŠ¿é¢„æµ‹","slug":"ğŸ“ˆè¶‹åŠ¿é¢„æµ‹","link":"#ğŸ“ˆè¶‹åŠ¿é¢„æµ‹","children":[]},{"level":2,"title":"åç»­è¿½è¸ª","slug":"åç»­è¿½è¸ª","link":"#åç»­è¿½è¸ª","children":[]}]}}
