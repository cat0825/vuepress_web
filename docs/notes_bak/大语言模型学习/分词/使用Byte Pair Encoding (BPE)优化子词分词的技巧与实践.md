---
dg-publish: true
tags:
  - NLP
title: ä½¿ç”¨Byte Pair Encoding (BPE)ä¼˜åŒ–å­è¯åˆ†è¯çš„æŠ€å·§ä¸å®è·µ
dg-permalink: /å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /åˆ†è¯/BPE
permalink: /å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /åˆ†è¯/BPE/
dgPassFrontmatter: true
noteIcon:
created: 2025-03-27T09:54:11.996+08:00
updated: 2025-04-13T17:21:31.527+08:00
createTime: 2025/05/13 17:33:52
---



## å…ƒæ•°æ®
- **åˆ†ç±»**ï¼šè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰
- **æ ‡ç­¾**ï¼šBPEã€åˆ†è¯ç®—æ³•ã€å­è¯ç¼–ç ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€ä¼˜åŒ–
- **æ—¥æœŸ**ï¼š2025å¹´4æœˆ1æ—¥  

---



## æ ¸å¿ƒè§‚ç‚¹æ¦‚è¿°
Byte Pair Encoding (BPE) æ˜¯ä¸€ç§å¸¸è§çš„å­è¯åˆ†è¯ç®—æ³•ï¼Œé€šè¿‡é€æ­¥åˆå¹¶é¢‘ç‡æœ€é«˜çš„å­—ç¬¦å¯¹ï¼Œç”Ÿæˆä¸€ä¸ªé«˜æ•ˆçš„å­è¯è¯è¡¨ã€‚å®ƒè¢«å¹¿æ³›ç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä»»åŠ¡ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨ç¥ç»æœºå™¨ç¿»è¯‘ï¼ˆNMTï¼‰ä¸­ï¼Œç”¨ä»¥è§£å†³ç¨€æœ‰è¯é—®é¢˜ã€‚

ğŸ’¡ **å¯å‘ç‚¹**ï¼šBPEé€šè¿‡è´ªå©ªç®—æ³•é€æ­¥æ„å»ºå­è¯è¡¨ï¼Œèƒ½å¤Ÿåœ¨è¯æ±‡è¡¨å¤§å°å’Œç¼–ç æ•ˆç‡ä¹‹é—´å–å¾—å¹³è¡¡ã€‚

---



## é‡ç‚¹å†…å®¹æå–

### ## BPEçš„æ ¸å¿ƒæ€æƒ³
- BPEä»ä¸€ä¸ªåŸºç¡€çš„å°å‹è¯è¡¨å‡ºå‘ï¼Œä¸æ–­åˆå¹¶é¢‘ç‡æœ€é«˜çš„å­—ç¬¦å¯¹ï¼Œé€æ­¥ç”Ÿæˆæ–°çš„å­è¯å•å…ƒã€‚
- å…¶ç›®æ ‡æ˜¯åœ¨å­è¯ç²’åº¦å’Œè¯æ±‡è¡¨å¤§å°ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œä½¿å¾—æ¨¡å‹æ—¢èƒ½é«˜æ•ˆç¼–ç ï¼Œåˆèƒ½å¤„ç†ç¨€æœ‰è¯ã€‚


### ## BPEçš„æ“ä½œæ­¥éª¤
1. **âœ… å‡†å¤‡åŸºç¡€è¯è¡¨**ï¼šä¾‹å¦‚è‹±æ–‡ä¸­åŒ…å«26ä¸ªå­—æ¯åŠç¬¦å·ï¼ˆå¦‚ `_` è¡¨ç¤ºå•è¯ç»“å°¾ï¼‰ã€‚
2. **âš ï¸ æ‹†åˆ†è¯­æ–™ä¸ºæœ€å°å•å…ƒ**ï¼šå°†è®­ç»ƒè¯­æ–™ä¸­çš„å•è¯æ‹†è§£ä¸ºå•ä¸ªå­—ç¬¦ã€‚
3. **â—ï¸ ç»Ÿè®¡é¢‘ç‡å¹¶åˆå¹¶**ï¼šæ‰¾åˆ°è¯­æ–™ä¸­é¢‘ç‡æœ€é«˜çš„ç›¸é‚»å­—ç¬¦å¯¹ï¼Œå¹¶å°†å…¶åˆå¹¶ä¸ºæ–°çš„å­è¯ã€‚
4. **é‡å¤è¿­ä»£**ï¼šç›´åˆ°è¾¾åˆ°é¢„è®¾çš„å­è¯è¡¨å¤§å°æˆ–é¢‘ç‡é˜ˆå€¼ã€‚

---


### ## ç¤ºä¾‹ï¼šä»è¯­æ–™åº“ä¸­ç”Ÿæˆå­è¯è¡¨
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„BPEæ“ä½œç¤ºä¾‹ã€‚

#### åˆå§‹è¯­æ–™åº“ï¼ˆå¸¦é¢‘æ¬¡ï¼‰
| è¯é¢‘ | å•è¯        |
|------|-------------|
| [5]  | low_        |
| [2]  | lowest_     |
| [6]  | newer_      |
| [3]  | wider_      |
| [2]  | new_        |


#### åŸºç¡€å­—ç¬¦é¢‘æ¬¡ç»Ÿè®¡
| å­—ç¬¦ | é¢‘æ¬¡ |
|------|------|
| `_`  | 18   |
| `d`  | 3    |
| `e`  | 19   |
| `i`  | 3    |
| `l`  | 7    |
| `n`  | 8    |
| `o`  | 7    |
| `r`  | 9    |
| `s`  | 2    |
| `t`  | 2    |
| `w`  | 22   |


#### ç¬¬ä¸€æ¬¡è¿­ä»£ï¼šåˆå¹¶é¢‘ç‡æœ€é«˜çš„å­—ç¬¦å¯¹
- åˆå¹¶ `r` å’Œ `_`ï¼Œå½¢æˆæ–°å­è¯ `r_`ï¼Œæ›´æ–°åçš„é¢‘æ¬¡ä¸º9ã€‚
- æ›´æ–°åçš„å­—ç¬¦é¢‘æ¬¡è¡¨ï¼š
  
| å­—ç¬¦ | é¢‘æ¬¡ |
|------|------|
| `_`  | 9    |
| `d`  | 3    |
| `e`  | 19   |
| `i`  | 3    |
| `l`  | 7    |
| `n`  | 8    |
| `o`  | 7    |
| `r`  | 0    |
| `s`  | 2    |
| `t`  | 2    |
| `w`  | 22   |
| `r_` | 9    |

---


### ## ä¼˜ç¼ºç‚¹åˆ†æ
- **ä¼˜ç‚¹**ï¼š
    - é«˜æ•ˆå¹³è¡¡äº†è¯æ±‡è¡¨å¤§å°å’Œç¼–ç æ­¥æ•°ã€‚
    - èƒ½å¤Ÿå¤„ç†ç¨€æœ‰è¯ï¼Œé¿å…OOVï¼ˆOut of Vocabularyï¼‰é—®é¢˜ã€‚
- **ç¼ºç‚¹**ï¼š
    - åŸºäºè´ªå©ªç®—æ³•ï¼Œæ— æ³•ç”Ÿæˆå¸¦æ¦‚ç‡çš„å¤šç§åˆ†è¯ç»“æœã€‚
    - è§£ç æ—¶å¯èƒ½å­˜åœ¨æ­§ä¹‰é—®é¢˜ï¼Œä¾‹å¦‚åŒä¸€è¾“å…¥å¯å¯¹åº”å¤šç§åˆ†è¯æ–¹å¼ã€‚

---



## å¸¸è§é”™è¯¯ä¸æ³¨æ„äº‹é¡¹
âš ï¸ **åˆ†è¯æ­§ä¹‰é—®é¢˜**ï¼šä¾‹å¦‚ï¼Œ"Hello World" çš„åˆ†è¯ç»“æœå¯èƒ½å‡ºç°å¤šç§å½¢å¼ï¼Œå¦‚ "Hell/o/world" æˆ– "He/llo/world"ã€‚

âš ï¸ **è´ªå©ªç®—æ³•å±€é™æ€§**ï¼šBPEä»…è€ƒè™‘å½“å‰æœ€ä¼˜åˆå¹¶å¯¹ï¼Œå¯èƒ½é”™è¿‡å…¨å±€æœ€ä¼˜è§£ã€‚

---



## è¡ŒåŠ¨æ¸…å•
- [x] å®ç°ä¸€ä¸ªç®€å•çš„BPEç®—æ³•ï¼Œç”¨äºå°å‹è¯­æ–™åº“æµ‹è¯•ã€‚
- [x] æ¢ç´¢ä¸åŒBPEå‚æ•°ï¼ˆå¦‚è¯æ±‡è¡¨å¤§å°ï¼‰å¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“ã€‚
- [x] æ¯”è¾ƒBPEä¸å…¶ä»–åˆ†è¯æ–¹æ³•ï¼ˆå¦‚WordPieceï¼‰çš„å®é™…æ•ˆæœã€‚

---



## [æ€è€ƒ] å»¶ä¼¸é—®é¢˜
1. å¦‚ä½•æ”¹è¿›BPEç®—æ³•ï¼Œä½¿å…¶æ”¯æŒæ¦‚ç‡åˆ†è¯ï¼Ÿ
2. åœ¨å¤šè¯­è¨€æ¨¡å‹ä¸­ï¼ŒBPEå¦‚ä½•é€‚é…ä¸åŒè¯­è¨€çš„ç‰¹æ€§ï¼Ÿ
	1. - ä»»åŠ¡æ˜¯è·¨è¯­è¨€è¿ç§»/ç¿»è¯‘ â†’ å»ºè®® **å…±äº« BPE + è¯­è¨€å‰ç¼€**
	2. å¦‚æœæ˜¯ä½èµ„æºè¯­è¨€å»ºæ¨¡ â†’ è€ƒè™‘ **ç‹¬ç«‹å­è¯è¡¨** æˆ– BBPE åˆ†é…èµ„æºæ›´å…¬å¹³
3.  ä»¥ç»“åˆæ·±åº¦å­¦ä¹ æŠ€æœ¯ä¼˜åŒ–BPEçš„å­è¯é€‰æ‹©è¿‡ç¨‹ï¼Ÿ

---

> **æ¥æº**ï¼šæœ¬æ–‡å†…å®¹æ‘˜è‡ªè®ºæ–‡ã€ŠNeural Machine Translation of Rare Words with Subword Unitsã€‹ï¼Œé“¾æ¥ï¼š[https://arxiv.org/pdf/1508.07909](https://arxiv.org/pdf/1508.07909)
