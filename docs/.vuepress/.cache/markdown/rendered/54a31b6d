{"content":"<h2 id=\"元数据\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#元数据\"><span><strong>元数据</strong></span></a></h2>\n<ul>\n<li><strong>分类</strong>： 自然语言处理 (NLP)</li>\n<li><strong>标签</strong>：BBPE, BPE, 分词技术, 文本压缩, 多语言处理</li>\n<li><strong>日期</strong>：2025年4月2日</li>\n</ul>\n<hr>\n<h2 id=\"bbpe-字节级别的bpe分词技术\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe-字节级别的bpe分词技术\"><span><strong>BBPE：字节级别的BPE分词技术</strong></span></a></h2>\n<p>字节级别的BPE（Byte-level BPE，简称BBPE）是一种改进的分词技术，它将传统BPE从字符级别扩展到字节级别。该方法尤其适用于处理噪声文本和字符丰富的语言（如中文和日语），在多语言处理和文本压缩等场景中表现出色。</p>\n<hr>\n<h3 id=\"bbpe的核心特点与优势\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe的核心特点与优势\"><span><strong>BBPE的核心特点与优势</strong></span></a></h3>\n<p>💡 BBPE的主要特点和优势如下：</p>\n<ol>\n<li>\n<p><strong>词汇表更紧凑</strong></p>\n<ul>\n<li>通过基础词表使用256字节集（UTF-8编码），显著减少了稀有字符对词汇表的占用。</li>\n<li>在多语言任务中，字节级别子词可以实现更高效的共享，即使字符集不重叠。</li>\n</ul>\n</li>\n<li>\n<p><strong>高效的压缩能力</strong></p>\n<ul>\n<li>BBPE根据文本中的重复模式动态生成词汇表，适合处理大量重复内容的数据。</li>\n<li>支持多种数据类型（如文本、图像等）并保持无损压缩。</li>\n</ul>\n</li>\n<li>\n<p><strong>灵活性与可解码性</strong></p>\n<ul>\n<li>压缩效果和词汇表大小可灵活调整，满足不同场景需求。</li>\n<li>编码后的数据可以无损解码回原始数据。\n<img src=\"/img/user/附件/Pasted image 20250327100813.png\" alt=\"Pasted image 20250327100813.png\">\n<img src=\"/img/user/附件/Pasted image 20250327100754.png\" alt=\"Pasted image 20250327100754.png\"></li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3 id=\"bbpe的局限性与挑战\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe的局限性与挑战\"><span><strong>BBPE的局限性与挑战</strong></span></a></h3>\n<p>⚠️ 尽管BBPE有诸多优点，但也存在一些不足：</p>\n<ol>\n<li>\n<p><strong>编码序列长度增加</strong></p>\n<ul>\n<li>BBPE的编码序列可能略长于传统BPE，计算成本更高。</li>\n</ul>\n</li>\n<li>\n<p><strong>解码歧义问题</strong></p>\n<ul>\n<li>字节级别解码可能存在歧义，需要结合上下文信息和动态规划来确保解码结果的有效性。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3 id=\"bbpe与bpe的对比\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe与bpe的对比\"><span><strong>BBPE与BPE的对比</strong></span></a></h3>\n<p>以下是BBPE与传统BPE在分词结果上的对比：</p>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>BBPE</th>\n<th>BPE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>分词单位</strong></td>\n<td>字节级别</td>\n<td>字符级别</td>\n</tr>\n<tr>\n<td><strong>词汇表大小</strong></td>\n<td>更小</td>\n<td>较大</td>\n</tr>\n<tr>\n<td><strong>多语言共享能力</strong></td>\n<td>更强</td>\n<td>较弱</td>\n</tr>\n<tr>\n<td><strong>编码序列长度</strong></td>\n<td>略长</td>\n<td>较短</td>\n</tr>\n<tr>\n<td><strong>计算成本</strong></td>\n<td>较高</td>\n<td>较低</td>\n</tr>\n</tbody>\n</table>\n<p>📈 <strong>趋势预测</strong>：随着多语言模型和大规模数据处理需求的增长，BBPE在多语言共享和压缩效率上的优势将进一步推动其应用。</p>\n<hr>\n<h3 id=\"bbpe代码实现示例\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe代码实现示例\"><span><strong>BBPE代码实现示例</strong></span></a></h3>\n<p>以下是BBPE分词的核心代码实现示例：</p>\n<div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">split_words </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    [</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">byte_encoder</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">b</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> b </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> token</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">encode</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">utf-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> token </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> re</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">findall</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">pat_str</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> data</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 向词汇表中添加基本词汇</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">vocab </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">byte_encoder</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">values</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">())</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">merges </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 构建词汇表，直到满足所需的词汇量</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">while</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> len</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">vocab</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> vocab_size</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">len</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">vocab</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    pair_freq </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Counter</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 找出最常见的一对</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> split_word </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> split_words</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        pair_freq</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">update</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">zip</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">split_word</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[:</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">-</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> split_word</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:]))</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    most_common_pair </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> pair_freq</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">most_common</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">][</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 更新词汇表和合并列表</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # ...</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><hr>\n<h3 id=\"常见错误提示\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#常见错误提示\"><span><strong>常见错误提示</strong></span></a></h3>\n<p>❗️ 在实际使用BBPE时，需注意以下问题：</p>\n<ul>\n<li><strong>上下文解码问题</strong>：未正确实现上下文信息融合可能导致解码结果不准确。</li>\n<li><strong>词汇表生成效率</strong>：大规模数据集上构建词汇表可能时间较长，应优化算法或使用并行处理。</li>\n</ul>\n<hr>\n<h3 id=\"行动清单\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#行动清单\"><span><strong>行动清单</strong></span></a></h3>\n<p>✅ 学习BBPE的理论基础与实现细节。<br>\n✅ 在多语言任务中试验BBPE，观察其紧凑性与共享能力。<br>\n✅ 探索BBPE在非文本数据（如图像）的应用潜力。</p>\n<hr>\n<h2 id=\"思考-板块\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#思考-板块\"><span>[思考] 板块</span></a></h2>\n<ol>\n<li>BBPE是否能进一步优化以减少编码序列长度，同时保持其压缩性能？</li>\n<li>在多模态任务（如图像+文本）中，BBPE是否能通过统一编码提升跨模态理解能力？</li>\n<li>是否可以结合神经网络（如Transformer）动态调整BBPE的分词策略？</li>\n</ol>\n<hr>\n<blockquote>\n<p><strong>来源</strong>：本文内容基于论文《Neural Machine Translation with Byte-Level Subwords》及代码仓库<a href=\"https://gitee.com/wangyizhen/fairseq\" target=\"_blank\" rel=\"noopener noreferrer\">https://gitee.com/wangyizhen/fairseq</a>。\nhttps://arxiv.org/pdf/1909.03341</p>\n</blockquote>\n","env":{"base":"/","filePath":"/Users/qianyuhe/Desktop/my-project/docs/notes_bak/大语言模型学习/分词/BBPE：字节级别的BPE分词技术解析与应用.md","filePathRelative":"notes_bak/大语言模型学习/分词/BBPE：字节级别的BPE分词技术解析与应用.md","frontmatter":{"dg-publish":true,"dg-permalink":"/大语言模型学习/分词/BBPE：字节级别的BPE分词技术解析与应用","dg-home":false,"dg-description":"这是一个测试","dg-hide":false,"dg-hide-title":false,"dg-show-backlinks":true,"dg-show-local-graph":true,"dg-show-inline-title":true,"dg-pinned":false,"dg-passphrase":1234,"dg-enable-mathjax":false,"dg-enable-mermaid":false,"dg-enable-uml":false,"dg-note-icon":0,"dg-enable-dataview":false,"dg-metatags":[{"name":"在此输入元标签名称","content":"在此输入元标签内容"}],"tags":["NLP"],"permalink":"/大语言模型学习/分词/BBPE：字节级别的BPE分词技术解析与应用/","metatags":[{"name":"在此输入元标签名称","content":"在此输入元标签内容"}],"dgShowBacklinks":true,"dgShowLocalGraph":true,"dgShowInlineTitle":true,"dgPassFrontmatter":true,"noteIcon":0,"created":"2025-03-27T02:05:13.901Z","updated":"2025-04-12T04:53:44.831Z","title":"BBPE：字节级别的BPE分词技术解析与应用","createTime":"2025/05/13 17:33:52"},"sfcBlocks":{"template":{"type":"template","content":"<template><h2 id=\"元数据\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#元数据\"><span><strong>元数据</strong></span></a></h2>\n<ul>\n<li><strong>分类</strong>： 自然语言处理 (NLP)</li>\n<li><strong>标签</strong>：BBPE, BPE, 分词技术, 文本压缩, 多语言处理</li>\n<li><strong>日期</strong>：2025年4月2日</li>\n</ul>\n<hr>\n<h2 id=\"bbpe-字节级别的bpe分词技术\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe-字节级别的bpe分词技术\"><span><strong>BBPE：字节级别的BPE分词技术</strong></span></a></h2>\n<p>字节级别的BPE（Byte-level BPE，简称BBPE）是一种改进的分词技术，它将传统BPE从字符级别扩展到字节级别。该方法尤其适用于处理噪声文本和字符丰富的语言（如中文和日语），在多语言处理和文本压缩等场景中表现出色。</p>\n<hr>\n<h3 id=\"bbpe的核心特点与优势\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe的核心特点与优势\"><span><strong>BBPE的核心特点与优势</strong></span></a></h3>\n<p>💡 BBPE的主要特点和优势如下：</p>\n<ol>\n<li>\n<p><strong>词汇表更紧凑</strong></p>\n<ul>\n<li>通过基础词表使用256字节集（UTF-8编码），显著减少了稀有字符对词汇表的占用。</li>\n<li>在多语言任务中，字节级别子词可以实现更高效的共享，即使字符集不重叠。</li>\n</ul>\n</li>\n<li>\n<p><strong>高效的压缩能力</strong></p>\n<ul>\n<li>BBPE根据文本中的重复模式动态生成词汇表，适合处理大量重复内容的数据。</li>\n<li>支持多种数据类型（如文本、图像等）并保持无损压缩。</li>\n</ul>\n</li>\n<li>\n<p><strong>灵活性与可解码性</strong></p>\n<ul>\n<li>压缩效果和词汇表大小可灵活调整，满足不同场景需求。</li>\n<li>编码后的数据可以无损解码回原始数据。\n<img src=\"/img/user/附件/Pasted image 20250327100813.png\" alt=\"Pasted image 20250327100813.png\">\n<img src=\"/img/user/附件/Pasted image 20250327100754.png\" alt=\"Pasted image 20250327100754.png\"></li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3 id=\"bbpe的局限性与挑战\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe的局限性与挑战\"><span><strong>BBPE的局限性与挑战</strong></span></a></h3>\n<p>⚠️ 尽管BBPE有诸多优点，但也存在一些不足：</p>\n<ol>\n<li>\n<p><strong>编码序列长度增加</strong></p>\n<ul>\n<li>BBPE的编码序列可能略长于传统BPE，计算成本更高。</li>\n</ul>\n</li>\n<li>\n<p><strong>解码歧义问题</strong></p>\n<ul>\n<li>字节级别解码可能存在歧义，需要结合上下文信息和动态规划来确保解码结果的有效性。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3 id=\"bbpe与bpe的对比\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe与bpe的对比\"><span><strong>BBPE与BPE的对比</strong></span></a></h3>\n<p>以下是BBPE与传统BPE在分词结果上的对比：</p>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>BBPE</th>\n<th>BPE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>分词单位</strong></td>\n<td>字节级别</td>\n<td>字符级别</td>\n</tr>\n<tr>\n<td><strong>词汇表大小</strong></td>\n<td>更小</td>\n<td>较大</td>\n</tr>\n<tr>\n<td><strong>多语言共享能力</strong></td>\n<td>更强</td>\n<td>较弱</td>\n</tr>\n<tr>\n<td><strong>编码序列长度</strong></td>\n<td>略长</td>\n<td>较短</td>\n</tr>\n<tr>\n<td><strong>计算成本</strong></td>\n<td>较高</td>\n<td>较低</td>\n</tr>\n</tbody>\n</table>\n<p>📈 <strong>趋势预测</strong>：随着多语言模型和大规模数据处理需求的增长，BBPE在多语言共享和压缩效率上的优势将进一步推动其应用。</p>\n<hr>\n<h3 id=\"bbpe代码实现示例\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe代码实现示例\"><span><strong>BBPE代码实现示例</strong></span></a></h3>\n<p>以下是BBPE分词的核心代码实现示例：</p>\n<div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">split_words </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    [</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">byte_encoder</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">b</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> b </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> token</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">encode</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">utf-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> token </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> re</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">findall</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">pat_str</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> data</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 向词汇表中添加基本词汇</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">vocab </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">byte_encoder</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">values</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">())</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">merges </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 构建词汇表，直到满足所需的词汇量</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">while</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> len</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">vocab</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> vocab_size</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">len</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">vocab</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    pair_freq </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Counter</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 找出最常见的一对</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> split_word </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> split_words</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        pair_freq</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">update</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">zip</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">split_word</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[:</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">-</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> split_word</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:]))</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    most_common_pair </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> pair_freq</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">most_common</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">][</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 更新词汇表和合并列表</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # ...</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><hr>\n<h3 id=\"常见错误提示\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#常见错误提示\"><span><strong>常见错误提示</strong></span></a></h3>\n<p>❗️ 在实际使用BBPE时，需注意以下问题：</p>\n<ul>\n<li><strong>上下文解码问题</strong>：未正确实现上下文信息融合可能导致解码结果不准确。</li>\n<li><strong>词汇表生成效率</strong>：大规模数据集上构建词汇表可能时间较长，应优化算法或使用并行处理。</li>\n</ul>\n<hr>\n<h3 id=\"行动清单\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#行动清单\"><span><strong>行动清单</strong></span></a></h3>\n<p>✅ 学习BBPE的理论基础与实现细节。<br>\n✅ 在多语言任务中试验BBPE，观察其紧凑性与共享能力。<br>\n✅ 探索BBPE在非文本数据（如图像）的应用潜力。</p>\n<hr>\n<h2 id=\"思考-板块\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#思考-板块\"><span>[思考] 板块</span></a></h2>\n<ol>\n<li>BBPE是否能进一步优化以减少编码序列长度，同时保持其压缩性能？</li>\n<li>在多模态任务（如图像+文本）中，BBPE是否能通过统一编码提升跨模态理解能力？</li>\n<li>是否可以结合神经网络（如Transformer）动态调整BBPE的分词策略？</li>\n</ol>\n<hr>\n<blockquote>\n<p><strong>来源</strong>：本文内容基于论文《Neural Machine Translation with Byte-Level Subwords》及代码仓库<a href=\"https://gitee.com/wangyizhen/fairseq\" target=\"_blank\" rel=\"noopener noreferrer\">https://gitee.com/wangyizhen/fairseq</a>。\nhttps://arxiv.org/pdf/1909.03341</p>\n</blockquote>\n</template>","contentStripped":"<h2 id=\"元数据\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#元数据\"><span><strong>元数据</strong></span></a></h2>\n<ul>\n<li><strong>分类</strong>： 自然语言处理 (NLP)</li>\n<li><strong>标签</strong>：BBPE, BPE, 分词技术, 文本压缩, 多语言处理</li>\n<li><strong>日期</strong>：2025年4月2日</li>\n</ul>\n<hr>\n<h2 id=\"bbpe-字节级别的bpe分词技术\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe-字节级别的bpe分词技术\"><span><strong>BBPE：字节级别的BPE分词技术</strong></span></a></h2>\n<p>字节级别的BPE（Byte-level BPE，简称BBPE）是一种改进的分词技术，它将传统BPE从字符级别扩展到字节级别。该方法尤其适用于处理噪声文本和字符丰富的语言（如中文和日语），在多语言处理和文本压缩等场景中表现出色。</p>\n<hr>\n<h3 id=\"bbpe的核心特点与优势\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe的核心特点与优势\"><span><strong>BBPE的核心特点与优势</strong></span></a></h3>\n<p>💡 BBPE的主要特点和优势如下：</p>\n<ol>\n<li>\n<p><strong>词汇表更紧凑</strong></p>\n<ul>\n<li>通过基础词表使用256字节集（UTF-8编码），显著减少了稀有字符对词汇表的占用。</li>\n<li>在多语言任务中，字节级别子词可以实现更高效的共享，即使字符集不重叠。</li>\n</ul>\n</li>\n<li>\n<p><strong>高效的压缩能力</strong></p>\n<ul>\n<li>BBPE根据文本中的重复模式动态生成词汇表，适合处理大量重复内容的数据。</li>\n<li>支持多种数据类型（如文本、图像等）并保持无损压缩。</li>\n</ul>\n</li>\n<li>\n<p><strong>灵活性与可解码性</strong></p>\n<ul>\n<li>压缩效果和词汇表大小可灵活调整，满足不同场景需求。</li>\n<li>编码后的数据可以无损解码回原始数据。\n<img src=\"/img/user/附件/Pasted image 20250327100813.png\" alt=\"Pasted image 20250327100813.png\">\n<img src=\"/img/user/附件/Pasted image 20250327100754.png\" alt=\"Pasted image 20250327100754.png\"></li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3 id=\"bbpe的局限性与挑战\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe的局限性与挑战\"><span><strong>BBPE的局限性与挑战</strong></span></a></h3>\n<p>⚠️ 尽管BBPE有诸多优点，但也存在一些不足：</p>\n<ol>\n<li>\n<p><strong>编码序列长度增加</strong></p>\n<ul>\n<li>BBPE的编码序列可能略长于传统BPE，计算成本更高。</li>\n</ul>\n</li>\n<li>\n<p><strong>解码歧义问题</strong></p>\n<ul>\n<li>字节级别解码可能存在歧义，需要结合上下文信息和动态规划来确保解码结果的有效性。</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3 id=\"bbpe与bpe的对比\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe与bpe的对比\"><span><strong>BBPE与BPE的对比</strong></span></a></h3>\n<p>以下是BBPE与传统BPE在分词结果上的对比：</p>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>BBPE</th>\n<th>BPE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>分词单位</strong></td>\n<td>字节级别</td>\n<td>字符级别</td>\n</tr>\n<tr>\n<td><strong>词汇表大小</strong></td>\n<td>更小</td>\n<td>较大</td>\n</tr>\n<tr>\n<td><strong>多语言共享能力</strong></td>\n<td>更强</td>\n<td>较弱</td>\n</tr>\n<tr>\n<td><strong>编码序列长度</strong></td>\n<td>略长</td>\n<td>较短</td>\n</tr>\n<tr>\n<td><strong>计算成本</strong></td>\n<td>较高</td>\n<td>较低</td>\n</tr>\n</tbody>\n</table>\n<p>📈 <strong>趋势预测</strong>：随着多语言模型和大规模数据处理需求的增长，BBPE在多语言共享和压缩效率上的优势将进一步推动其应用。</p>\n<hr>\n<h3 id=\"bbpe代码实现示例\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bbpe代码实现示例\"><span><strong>BBPE代码实现示例</strong></span></a></h3>\n<p>以下是BBPE分词的核心代码实现示例：</p>\n<div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">split_words </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    [</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">byte_encoder</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">b</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> b </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> token</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">encode</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">utf-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> token </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> re</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">findall</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">pat_str</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> data</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 向词汇表中添加基本词汇</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">vocab </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">byte_encoder</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">values</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">())</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">merges </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 构建词汇表，直到满足所需的词汇量</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">while</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> len</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">vocab</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> vocab_size</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    print</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">len</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">vocab</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    pair_freq </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Counter</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 找出最常见的一对</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> split_word </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> split_words</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        pair_freq</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">update</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">zip</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">split_word</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[:</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">-</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> split_word</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:]))</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    most_common_pair </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> pair_freq</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">most_common</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">][</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 更新词汇表和合并列表</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # ...</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><hr>\n<h3 id=\"常见错误提示\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#常见错误提示\"><span><strong>常见错误提示</strong></span></a></h3>\n<p>❗️ 在实际使用BBPE时，需注意以下问题：</p>\n<ul>\n<li><strong>上下文解码问题</strong>：未正确实现上下文信息融合可能导致解码结果不准确。</li>\n<li><strong>词汇表生成效率</strong>：大规模数据集上构建词汇表可能时间较长，应优化算法或使用并行处理。</li>\n</ul>\n<hr>\n<h3 id=\"行动清单\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#行动清单\"><span><strong>行动清单</strong></span></a></h3>\n<p>✅ 学习BBPE的理论基础与实现细节。<br>\n✅ 在多语言任务中试验BBPE，观察其紧凑性与共享能力。<br>\n✅ 探索BBPE在非文本数据（如图像）的应用潜力。</p>\n<hr>\n<h2 id=\"思考-板块\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#思考-板块\"><span>[思考] 板块</span></a></h2>\n<ol>\n<li>BBPE是否能进一步优化以减少编码序列长度，同时保持其压缩性能？</li>\n<li>在多模态任务（如图像+文本）中，BBPE是否能通过统一编码提升跨模态理解能力？</li>\n<li>是否可以结合神经网络（如Transformer）动态调整BBPE的分词策略？</li>\n</ol>\n<hr>\n<blockquote>\n<p><strong>来源</strong>：本文内容基于论文《Neural Machine Translation with Byte-Level Subwords》及代码仓库<a href=\"https://gitee.com/wangyizhen/fairseq\" target=\"_blank\" rel=\"noopener noreferrer\">https://gitee.com/wangyizhen/fairseq</a>。\nhttps://arxiv.org/pdf/1909.03341</p>\n</blockquote>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"## **元数据**\n- **分类**： 自然语言处理 (NLP) \n- **标签**：BBPE, BPE, 分词技术, 文本压缩, 多语言处理  \n- **日期**：2025年4月2日  \n\n---\n\n\n\n## **BBPE：字节级别的BPE分词技术**\n字节级别的BPE（Byte-level BPE，简称BBPE）是一种改进的分词技术，它将传统BPE从字符级别扩展到字节级别。该方法尤其适用于处理噪声文本和字符丰富的语言（如中文和日语），在多语言处理和文本压缩等场景中表现出色。\n\n---\n\n### **BBPE的核心特点与优势**\n💡 BBPE的主要特点和优势如下：\n\n1. **词汇表更紧凑**  \n   - 通过基础词表使用256字节集（UTF-8编码），显著减少了稀有字符对词汇表的占用。\n   - 在多语言任务中，字节级别子词可以实现更高效的共享，即使字符集不重叠。\n\n2. **高效的压缩能力**  \n   - BBPE根据文本中的重复模式动态生成词汇表，适合处理大量重复内容的数据。\n   - 支持多种数据类型（如文本、图像等）并保持无损压缩。\n\n3. **灵活性与可解码性**  \n   - 压缩效果和词汇表大小可灵活调整，满足不同场景需求。\n   - 编码后的数据可以无损解码回原始数据。\n   ![Pasted image 20250327100813.png](/img/user/%E9%99%84%E4%BB%B6/Pasted%20image%2020250327100813.png)\n   ![Pasted image 20250327100754.png](/img/user/%E9%99%84%E4%BB%B6/Pasted%20image%2020250327100754.png)\n\n---\n\n\n### **BBPE的局限性与挑战**\n⚠️ 尽管BBPE有诸多优点，但也存在一些不足：\n\n1. **编码序列长度增加**  \n   - BBPE的编码序列可能略长于传统BPE，计算成本更高。\n\n2. **解码歧义问题**  \n   - 字节级别解码可能存在歧义，需要结合上下文信息和动态规划来确保解码结果的有效性。\n\n---\n\n\n### **BBPE与BPE的对比**\n以下是BBPE与传统BPE在分词结果上的对比：\n\n| 特性          | BBPE | BPE  |\n| ----------- | ---- | ---- |\n| **分词单位**    | 字节级别 | 字符级别 |\n| **词汇表大小**   | 更小   | 较大   |\n| **多语言共享能力** | 更强   | 较弱   |\n| **编码序列长度**  | 略长   | 较短   |\n| **计算成本**    | 较高   | 较低   |\n\n📈 **趋势预测**：随着多语言模型和大规模数据处理需求的增长，BBPE在多语言共享和压缩效率上的优势将进一步推动其应用。\n\n---\n\n\n### **BBPE代码实现示例**\n以下是BBPE分词的核心代码实现示例：\n\n```python\nsplit_words = [\n    [byte_encoder[b] for b in token.encode(\"utf-8\")] \n    for token in re.findall(pat_str, data)\n]\n\n# 向词汇表中添加基本词汇\nvocab = set(byte_encoder.values())\nmerges = []\n\n# 构建词汇表，直到满足所需的词汇量\nwhile len(vocab) < vocab_size:\n    print(len(vocab))\n    pair_freq = Counter()\n\n    # 找出最常见的一对\n    for split_word in split_words:\n        pair_freq.update(zip(split_word[:-1], split_word[1:]))\n\n    most_common_pair = pair_freq.most_common(1)[0][0]\n\n    # 更新词汇表和合并列表\n    # ...\n```\n\n---\n\n\n### **常见错误提示**\n❗️ 在实际使用BBPE时，需注意以下问题：\n- **上下文解码问题**：未正确实现上下文信息融合可能导致解码结果不准确。\n- **词汇表生成效率**：大规模数据集上构建词汇表可能时间较长，应优化算法或使用并行处理。\n\n---\n\n\n### **行动清单**\n✅ 学习BBPE的理论基础与实现细节。  \n✅ 在多语言任务中试验BBPE，观察其紧凑性与共享能力。  \n✅ 探索BBPE在非文本数据（如图像）的应用潜力。  \n\n---\n\n\n\n## [思考] 板块\n1. BBPE是否能进一步优化以减少编码序列长度，同时保持其压缩性能？  \n2. 在多模态任务（如图像+文本）中，BBPE是否能通过统一编码提升跨模态理解能力？  \n3. 是否可以结合神经网络（如Transformer）动态调整BBPE的分词策略？\n\n---\n\n> **来源**：本文内容基于论文《Neural Machine Translation with Byte-Level Subwords》及代码仓库[https://gitee.com/wangyizhen/fairseq](https://gitee.com/wangyizhen/fairseq)。\n> https://arxiv.org/pdf/1909.03341","excerpt":"","includedFiles":[],"tasklistId":0,"title":"","headers":[{"level":2,"title":"元数据","slug":"元数据","link":"#元数据","children":[]},{"level":2,"title":"BBPE：字节级别的BPE分词技术","slug":"bbpe-字节级别的bpe分词技术","link":"#bbpe-字节级别的bpe分词技术","children":[{"level":3,"title":"BBPE的核心特点与优势","slug":"bbpe的核心特点与优势","link":"#bbpe的核心特点与优势","children":[]},{"level":3,"title":"BBPE的局限性与挑战","slug":"bbpe的局限性与挑战","link":"#bbpe的局限性与挑战","children":[]},{"level":3,"title":"BBPE与BPE的对比","slug":"bbpe与bpe的对比","link":"#bbpe与bpe的对比","children":[]},{"level":3,"title":"BBPE代码实现示例","slug":"bbpe代码实现示例","link":"#bbpe代码实现示例","children":[]},{"level":3,"title":"常见错误提示","slug":"常见错误提示","link":"#常见错误提示","children":[]},{"level":3,"title":"行动清单","slug":"行动清单","link":"#行动清单","children":[]}]},{"level":2,"title":"[思考] 板块","slug":"思考-板块","link":"#思考-板块","children":[]}]}}
