---
{"dg-publish":true,"dg-permalink":"/å¤§è¯­è¨€æ¨¡åž‹å­¦ä¹ /RLå¼ºåŒ–å­¦ä¹ åŸºç¡€/DPOç›´æŽ¥åå¥½ä¼˜åŒ–/å¯¹æ¯”å­¦ä¹ è§’åº¦ç†è§£DPO","dg-home":false,"dg-description":"åœ¨æ­¤è¾“å…¥ç¬”è®°çš„æè¿°","dg-hide":false,"dg-hide-title":false,"dg-show-backlinks":true,"dg-show-local-graph":true,"dg-show-inline-title":true,"dg-pinned":false,"dg-passphrase":"åœ¨æ­¤è¾“å…¥è®¿é—®å¯†ç ","dg-enable-mathjax":false,"dg-enable-mermaid":false,"dg-enable-uml":false,"dg-note-icon":0,"dg-enable-dataview":false,"tags":["NLP"],"permalink":"/å¤§è¯­è¨€æ¨¡åž‹å­¦ä¹ /RLå¼ºåŒ–å­¦ä¹ åŸºç¡€/DPOç›´æŽ¥åå¥½ä¼˜åŒ–/å¯¹æ¯”å­¦ä¹ è§’åº¦ç†è§£DPO/","dgShowBacklinks":true,"dgShowLocalGraph":true,"dgShowInlineTitle":true,"dgPassFrontmatter":true,"noteIcon":0,"created":"2025-04-22T22:44:55.000+08:00","updated":"2025-04-22T22:46:13.000+08:00"}
---



# å¯¹æ¯”å­¦ä¹ ä¸Žç›´æŽ¥åå¥½ä¼˜åŒ–ï¼šä»Žäººç±»åé¦ˆä¸­å­¦ä¹ 

## å…ƒæ•°æ®
- åˆ†ç±»ï¼šæœºå™¨å­¦ä¹ 
- æ ‡ç­¾ï¼šå¯¹æ¯”å­¦ä¹ ã€åå¥½ä¼˜åŒ–ã€äººç±»åé¦ˆã€ç­–ç•¥è·ç¦»
- æ—¥æœŸï¼š2025å¹´4æœˆ12æ—¥


## å†…å®¹æ¦‚è¿°
åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸï¼Œå¯¹æ¯”å­¦ä¹ ï¼ˆContrastive Learningï¼‰å’Œç›´æŽ¥åå¥½ä¼˜åŒ–ï¼ˆDirect Preference Optimization, DPOï¼‰æ˜¯ä¸¤ç§é‡è¦çš„æŠ€æœ¯ã€‚æœ¬æ–‡æŽ¢è®¨äº†å¦‚ä½•é€šè¿‡å¯¹æ¯”å­¦ä¹ çš„è§†è§’æ¥ç†è§£DPOï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†äººç±»åé¦ˆæ—¶çš„åº”ç”¨ã€‚

ðŸ’¡ **å¯å‘ç‚¹**ï¼šDPOå¯ä»¥è¢«è§†ä½œä¸€ç§ç‰¹æ®Šå½¢å¼çš„å¯¹æ¯”å­¦ä¹ ï¼Œå…¶ä¸­æ­£è´Ÿæ ·æœ¬çš„æ•°é‡éƒ½ä¸ºä¸€ã€‚


## æ ¸å¿ƒè§‚ç‚¹
- **å¯¹æ¯”å­¦ä¹ çš„ç›®æ ‡**ï¼šé€šè¿‡å¯¹æ¯”å­¦ä¹ ï¼Œæˆ‘ä»¬å¸Œæœ›å­¦ä¹ ä¸€ç§è¡¨ç¤ºï¼Œä½¿å¾—ç›¸ä¼¼çš„æ ·æœ¬å½¼æ­¤æŽ¥è¿‘ï¼Œè€Œä¸ç›¸ä¼¼çš„æ ·æœ¬å½¼æ­¤è¿œç¦»ã€‚å¯¹äºŽä¸€ä¸ªé”šæ ·æœ¬ $x$ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ­£æ ·æœ¬ $x^+$ å’Œä¸€ç»„è´Ÿæ ·æœ¬ $\{x_i^-\}_{i=1}^m$ï¼Œé€šè¿‡æœ€å°åŒ–æŸå¤±å‡½æ•°æ¥å®žçŽ°ç›®æ ‡ã€‚
  
- **DPOçš„è§†è§’**ï¼šDPOå¯ä»¥è¢«çœ‹ä½œæ˜¯å¯¹æ¯”å­¦ä¹ çš„ä¸€ç§ç‰¹ä¾‹ï¼Œå…¶ä¸­æ­£è´Ÿæ ·æœ¬çš„æ•°é‡éƒ½ä¸ºä¸€ã€‚ç­–ç•¥ $\pi(y|x)$ è¡¨ç¤ºé”šæ ·æœ¬ä¸Žæ­£/è´Ÿæ ·æœ¬çš„è·ç¦»ï¼Œç›®çš„æ˜¯ä½¿ç­–ç•¥æ›´æŽ¥è¿‘æ­£æ ·æœ¬è€Œè¿œç¦»è´Ÿæ ·æœ¬ã€‚


## é‡ç‚¹æ®µè½

### å¯¹æ¯”å­¦ä¹ çš„æŸå¤±å‡½æ•°
å¯¹äºŽå¯¹æ¯”å­¦ä¹ ï¼ŒæŸå¤±å‡½æ•°å¯ä»¥è¡¨ç¤ºä¸ºï¼š

$$
\ell_f(x, x^+, \{x_i^-\}_{i=1}^m) = -\log \frac{\exp(f(x)^\top f(x^+))}{\exp(f(x)^\top f(x^+)) + \sum_{i=1}^m \exp(f(x)^\top f(x_i^-))}
$$

å…¶ä¸­ï¼Œä¸¤ä¸ªè¡¨ç¤ºçš„ç‚¹ç§¯ï¼ˆå¦‚ $f(x)^\top f(x^+)$ï¼‰è¢«è§†ä¸ºä¸¤ä¸ªæ ·æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§åˆ†æ•°ã€‚


### DPOä¸­çš„æŸå¤±å‡½æ•°
åœ¨DPOä¸­ï¼ŒæŸå¤±å‡½æ•°ç±»ä¼¼äºŽï¼š

$$
\text{loss} = - E_{(y^+, y^-, x) \in D} \left[ \log P[y^+ \succ y^-] \right]
$$

è¿™å¯ä»¥è¢«ç†è§£ä¸ºç­–ç•¥ä¸Žæ­£/è´Ÿæ ·æœ¬ä¹‹é—´çš„è·ç¦»è®¡ç®—ã€‚


## æ“ä½œæ­¥éª¤
1. âœ… é€‰æ‹©ä¸€ä¸ªé”šæ ·æœ¬ $x$ã€‚
2. âš  ç¡®å®šæ­£æ ·æœ¬ $x^+$ å’Œè´Ÿæ ·æœ¬é›†åˆ $\{x_i^-\}$ã€‚
3. â— è®¡ç®—æ¯ä¸ªæ ·æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§åˆ†æ•°ã€‚
4. âœ… æœ€å°åŒ–æŸå¤±å‡½æ•°ä»¥ä¼˜åŒ–ç­–ç•¥ã€‚


## å¸¸è§é”™è¯¯
> âš  åœ¨è®¡ç®—ç›¸ä¼¼æ€§åˆ†æ•°æ—¶ï¼Œç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„å‘é‡è¡¨ç¤ºå’Œç‚¹ç§¯æ“ä½œï¼Œä»¥é¿å…è¯¯å·®ã€‚


## è¡ŒåŠ¨æ¸…å•
- ç ”ç©¶æ›´å¤šå…³äºŽå¯¹æ¯”å­¦ä¹ å’ŒDPOçš„æ–‡çŒ®ã€‚
- å®žéªŒä¸åŒçš„æ•°æ®é›†ä»¥è¯„ä¼°DPOæ€§èƒ½ã€‚
- æŽ¢ç´¢å¦‚ä½•å°†DPOåº”ç”¨äºŽå…¶ä»–æœºå™¨å­¦ä¹ ä»»åŠ¡ã€‚

> åŽŸå§‹å‡ºå¤„ï¼š
> CONTRASTIVE PREFERENCE LEARNING: LEARNING FROM HUMAN FEEDBACK WITHOUT RL  
> Models of human preference for learning reward functions  
> OFFLINE RL WITH NO OOD ACTIONS: IN-SAMPLE LEARNING VIA IMPLICIT VALUE REGULARIZATION  
> Direct Preference Optimization: Your Language Model is Secretly a Reward Model  
> Direct Preference-based Policy Optimization without Reward Modeling
