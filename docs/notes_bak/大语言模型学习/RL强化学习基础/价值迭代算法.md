---
dg-publish: true
dg-permalink: /å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /RLå¼ºåŒ–å­¦ä¹ åŸºç¡€/ä»·å€¼è¿­ä»£ç®—æ³•
dg-home: false
dg-description: åœ¨æ­¤è¾“å…¥ç¬”è®°çš„æè¿°
dg-hide: false
dg-hide-title: false
dg-show-backlinks: true
dg-show-local-graph: true
dg-show-inline-title: true
dg-pinned: false
dg-passphrase: åœ¨æ­¤è¾“å…¥è®¿é—®å¯†ç 
dg-enable-mathjax: false
dg-enable-mermaid: false
dg-enable-uml: false
dg-note-icon: 0
dg-enable-dataview: false
tags:
  - NLP
permalink: /å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /RLå¼ºåŒ–å­¦ä¹ åŸºç¡€/ä»·å€¼è¿­ä»£ç®—æ³•/
dgShowBacklinks: true
dgShowLocalGraph: true
dgShowInlineTitle: true
dgPassFrontmatter: true
noteIcon: 0
created: 2025-04-11T13:31:34.000+08:00
updated: 2025-04-13T13:06:02.000+08:00
title: ä»·å€¼è¿­ä»£ç®—æ³•
createTime: 2025/05/13 17:33:52
---



# ä»·å€¼è¿­ä»£ç®—æ³•è§£æä¸å®ç°

## å…ƒæ•°æ®
- åˆ†ç±»ï¼šæœºå™¨å­¦ä¹ ç®—æ³•
- æ ‡ç­¾ï¼šä»·å€¼è¿­ä»£ï¼ŒåŠ¨æ€è§„åˆ’ï¼Œè´å°”æ›¼æ–¹ç¨‹ï¼Œç­–ç•¥è¯„ä¼°
- æ—¥æœŸï¼š2025å¹´4æœˆ10æ—¥


## å†…å®¹å¤„ç†

### æ ¸å¿ƒè§‚ç‚¹
ä»·å€¼è¿­ä»£ç®—æ³•æ˜¯ä¸€ç§ç”¨äºæ±‚è§£é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰çš„åŠ¨æ€è§„åˆ’æ–¹æ³•ã€‚å®ƒé€šè¿‡åå¤æ›´æ–°çŠ¶æ€ä»·å€¼å‡½æ•°ï¼Œç›´åˆ°æ”¶æ•›åˆ°ä¸€ä¸ªæœ€ä¼˜å€¼ã€‚ç„¶åï¼Œåˆ©ç”¨è¿™ä¸ªæœ€ä¼˜å€¼æ¥æå–æœ€ä¼˜ç­–ç•¥ã€‚ä¸ç­–ç•¥è¿­ä»£ä¸åŒï¼Œä»·å€¼è¿­ä»£ç›´æ¥åˆ©ç”¨æœ€ä¼˜è´å°”æ›¼æ–¹ç¨‹è¿›è¡Œæ›´æ–°ã€‚


### é‡ç‚¹æ®µè½
1. **ä»·å€¼è¿­ä»£å…¬å¼**ï¼š
   ä»·å€¼è¿­ä»£çš„æ ¸å¿ƒå…¬å¼æ˜¯ï¼š
   $$
   V_{k+1}(s) = \max_{a \in A} \left\{ r(s, a) + \gamma \sum_{s'} P(s' | s, a) V_k(s') \right\}
   $$

2. **ç®—æ³•æµç¨‹**ï¼š
   - éšæœºåˆå§‹åŒ–çŠ¶æ€ä»·å€¼å‡½æ•° $V(s)$ã€‚
   - åå¤æ›´æ–°æ¯ä¸ªçŠ¶æ€çš„ä»·å€¼ï¼Œç›´åˆ°ç›¸é‚»ä¸¤æ¬¡è¿­ä»£çš„å˜åŒ–å°äºç»™å®šé˜ˆå€¼ã€‚
   - æå–æœ€ä¼˜ç­–ç•¥ $\pi(s)$ã€‚

3. **ä»£ç ç¤ºä¾‹**ï¼š
   ```python
class ValueIteration:
    """ ä»·å€¼è¿­ä»£ç®—æ³• """
    for s in range(self.env.ncol * self.env.nrow):
        qsa_list = [] # å¼€å§‹è®¡ç®—çŠ¶æ€sä¸‹çš„æ‰€æœ‰Q(s,a)ä»·å€¼
        for a in range(4):
            qsa = 0
            for res in self.env.P[s][a]:
                p, next_state, r, done = res
                qsa += p * (r + self.gamma * self.v[next_state] * (1 - done))
            qsa_list.append(qsa) # è¿™ä¸€è¡Œå’Œä¸‹ä¸€è¡Œä»£ç æ˜¯ä»·å€¼è¿­ä»£å’Œç­–ç•¥è¿­ä»£çš„ä¸»è¦åŒºåˆ«
        new_v[s] = max(qsa_list)
        max_diff = max(max_diff, abs(new_v[s] - self.v[s]))
    self.v = new_v
    if max_diff < self.theta: break # æ»¡è¶³æ”¶æ•›æ¡ä»¶,é€€å‡ºè¯„ä¼°è¿­ä»£
    cnt += 1
    print("ä»·å€¼è¿­ä»£ä¸€å…±è¿›è¡Œ%dè½®" % cnt)
    self.get_policy()
def get_policy(self): # æ ¹æ®ä»·å€¼å‡½æ•°å¯¼å‡ºä¸€ä¸ªè´ªå©ªç­–ç•¥
    for s in range(self.env.nrow * self.env.ncol):
        qsa_list = []
        for a in range(4):
            qsa = 0
            for res in self.env.P[s][a]:
                p, next_state, r, done = res
                qsa += p * (r + self.gamma * self.v[next_state] * (1 - done))
            qsa_list.append(qsa)
        maxq = max(qsa_list)
        cntq = qsa_list.count(maxq) # è®¡ç®—æœ‰å‡ ä¸ªåŠ¨ä½œå¾—åˆ°äº†æœ€å¤§çš„Qå€¼
        # è®©è¿™äº›åŠ¨ä½œå‡åˆ†æ¦‚ç‡
        self.pi[s] = [1 / cntq if q == maxq else 0 for q in qsa_list]


   ```


### æŠ€æœ¯æœ¯è¯­è§£é‡Š
- **æœ€ä¼˜è´å°”æ›¼æ–¹ç¨‹**ï¼šä¸€ç§ç”¨äºç¡®å®šæœ€ä¼˜ç­–ç•¥çš„æ–¹ç¨‹ï¼Œé€šè¿‡æœ€å¤§åŒ–æœŸæœ›å›æŠ¥æ¥æ›´æ–°çŠ¶æ€ä»·å€¼ã€‚
- **çŠ¶æ€ä»·å€¼å‡½æ•°**ï¼šè¡¨ç¤ºåœ¨ç»™å®šç­–ç•¥ä¸‹ï¼Œä»æŸä¸€çŠ¶æ€å¼€å§‹çš„æœŸæœ›å›æŠ¥ã€‚
- **ç­–ç•¥è¯„ä¼°**ï¼šè®¡ç®—åœ¨æŸç­–ç•¥ä¸‹ï¼Œæ¯ä¸ªçŠ¶æ€çš„æœŸæœ›å›æŠ¥ã€‚


## æ“ä½œæ­¥éª¤
1. âœ… éšæœºåˆå§‹åŒ–çŠ¶æ€ä»·å€¼å‡½æ•° $V(s)$ã€‚
2. âš  æ£€æŸ¥ç›¸é‚»ä¸¤æ¬¡è¿­ä»£çš„å˜åŒ–æ˜¯å¦å°äºé˜ˆå€¼ã€‚
3. â— æå–æœ€ä¼˜ç­–ç•¥ $\pi(s)$ã€‚


## å¸¸è§é”™è¯¯
> **è­¦å‘Š**ï¼šåœ¨æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œç¡®ä¿æ‰€æœ‰çŠ¶æ€éƒ½è¢«æ­£ç¡®åœ°éå†å’Œæ›´æ–°ï¼Œä»¥å…å¯¼è‡´æ”¶æ•›ä¸æ­£ç¡®ã€‚


## ğŸ’¡å¯å‘ç‚¹
- ä»·å€¼è¿­ä»£ç›´æ¥åˆ©ç”¨æœ€ä¼˜è´å°”æ›¼æ–¹ç¨‹ï¼Œå‡å°‘äº†ç­–ç•¥è¯„ä¼°ä¸ç­–ç•¥æ›´æ–°çš„äº¤æ›¿è¿‡ç¨‹ã€‚


## è¡ŒåŠ¨æ¸…å•
- å®ç°ä¸€ä¸ªç®€å•çš„ä»·å€¼è¿­ä»£ç®—æ³•ã€‚
- æµ‹è¯•ä¸åŒé˜ˆå€¼å¯¹æ”¶æ•›é€Ÿåº¦çš„å½±å“ã€‚
- æ¯”è¾ƒä»·å€¼è¿­ä»£ä¸ç­–ç•¥è¿­ä»£çš„æ•ˆç‡ã€‚


## ğŸ“ˆè¶‹åŠ¿é¢„æµ‹
éšç€è®¡ç®—èƒ½åŠ›çš„æå‡ï¼Œä»·å€¼è¿­ä»£ç®—æ³•åœ¨æ›´å¤§è§„æ¨¡é—®é¢˜ä¸Šçš„åº”ç”¨å°†æ›´åŠ å¹¿æ³›ï¼Œå¹¶ä¸”å¯èƒ½ä¼šä¸å…¶ä»–ä¼˜åŒ–ç®—æ³•ç»“åˆä½¿ç”¨ä»¥æé«˜æ•ˆç‡ã€‚


## åç»­è¿½è¸ª
- æ¢ç´¢ä»·å€¼è¿­ä»£åœ¨éç¡®å®šæ€§ç¯å¢ƒä¸­çš„åº”ç”¨ã€‚
- ç ”ç©¶ç»“åˆæ·±åº¦å­¦ä¹ çš„ä»·å€¼è¿­ä»£æ–¹æ³•ã€‚


## [æ€è€ƒ]æ¿å—
1. å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ”¶æ•›é˜ˆå€¼ä»¥å¹³è¡¡è®¡ç®—æ•ˆç‡ä¸ç»“æœç²¾åº¦ï¼Ÿ
2. åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦‚ä½•å¤„ç†çŠ¶æ€ç©ºé—´è¿‡å¤§çš„é—®é¢˜ï¼Ÿ
3. ä»·å€¼è¿­ä»£èƒ½å¦ä¸å…¶ä»–å¼ºåŒ–å­¦ä¹ ç®—æ³•ç»“åˆä½¿ç”¨ä»¥æé«˜æ€§èƒ½ï¼Ÿ

> æ¥æºï¼šæœ¬æ–‡å†…å®¹åŸºäºå¯¹ä»·å€¼è¿­ä»£ç®—æ³•çš„è§£æï¼ŒåŸå§‹å‡ºå¤„æœªæä¾›ã€‚
