{"content":"<h2 id=\"å…ƒæ•°æ®\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å…ƒæ•°æ®\"><span>å…ƒæ•°æ®</span></a></h2>\n<p><strong>åˆ†ç±»</strong>ï¼šäººå·¥æ™ºèƒ½æ¨¡å‹æ¶æ„<br>\n<strong>æ ‡ç­¾</strong>ï¼šDeepSeek-V3, MoEç»“æ„, åŠ¨æ€è·¯ç”±, å¤štokené¢„æµ‹<br>\n<strong>æ—¥æœŸ</strong>ï¼š2025å¹´4æœˆ26æ—¥</p>\n<h2 id=\"æ ¸å¿ƒæ¶æ„æ¼”è¿›\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ ¸å¿ƒæ¶æ„æ¼”è¿›\"><span>æ ¸å¿ƒæ¶æ„æ¼”è¿›</span></a></h2>\n<h3 id=\"æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°\"><span>æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°</span></a></h3>\n<ul>\n<li><strong>ç»†ç²’åº¦ä¸“å®¶åˆ†é…</strong>ï¼š256ä¸ªè·¯ç”±ä¸“å®¶é‡‡ç”¨å…±äº«/ä¸“å±æ··åˆé…ç½®</li>\n<li><strong>è·¯ç”±æ¿€æ´»å‡½æ•°</strong>ï¼š<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>Gate</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>Ïƒ</mi><mo stretchy=\"false\">(</mo><msub><mi>W</mi><mi>g</mi></msub><mo>â‹…</mo><mi>x</mi><mo>+</mo><msub><mi>b</mi><mi>g</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\text{Gate}(x) = \\sigma(W_g \\cdot x + b_g)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">Gate</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">Ïƒ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p>\nå°†softmaxæ›¿æ¢ä¸ºsigmoidï¼Œç¼“è§£ä¸“å®¶æ•°é‡å€å¢å¸¦æ¥çš„æ¿€æ´»å†²çª</li>\n<li><strong>åŠ¨æ€è´Ÿè½½å‡è¡¡</strong>ï¼š<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mtext>SelectionScore</mtext><mi>i</mi></msub><mo>=</mo><msub><mtext>ExpertScore</mtext><mi>i</mi></msub><mo>+</mo><msub><mi>Î±</mi><mi>i</mi></msub><mo>â‹…</mo><mi>Î²</mi></mrow><annotation encoding=\"application/x-tex\">\\text{SelectionScore}_i = \\text{ExpertScore}_i + \\alpha_i \\cdot \\beta\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">SelectionScore</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9275em;vertical-align:-0.2441em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">ExpertScore</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2175em;\"><span style=\"top:-2.4559em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2441em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5945em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span></span></span></span></span></p>\né€šè¿‡å¯å­¦ä¹ åç½®é¡¹<span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span></span></span></span>è‡ªåŠ¨è°ƒèŠ‚ä¸“å®¶è´Ÿè½½\n<img src=\"/img/user/é™„ä»¶/Pasted image 20250426222200.png\" alt=\"Pasted image 20250426222200.png\"></li>\n</ul>\n<h3 id=\"é€šä¿¡ä¼˜åŒ–æœºåˆ¶\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#é€šä¿¡ä¼˜åŒ–æœºåˆ¶\"><span>é€šä¿¡ä¼˜åŒ–æœºåˆ¶</span></a></h3>\n<ul>\n<li>æ— tokenä¸¢å¼ƒè®¾è®¡</li>\n<li>åºåˆ—çº§è¾…åŠ©æŸå¤±è¡¥å¿</li>\n<li>è®¾å¤‡é—´é€šä¿¡å¹¶è¡ŒåŠ é€Ÿ</li>\n</ul>\n<h2 id=\"å¤šç›®æ ‡è®­ç»ƒä½“ç³»\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¤šç›®æ ‡è®­ç»ƒä½“ç³»\"><span>å¤šç›®æ ‡è®­ç»ƒä½“ç³»</span></a></h2>\n<h3 id=\"å¤štokené¢„æµ‹-mtp\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¤štokené¢„æµ‹-mtp\"><span>å¤štokené¢„æµ‹(MTP)</span></a></h3>\n<ul>\n<li>\n<p><strong>é¢„æµ‹è·¨åº¦</strong>ï¼šD=4ä¸ªè¿ç»­token</p>\n</li>\n<li>\n<p><strong>æ¨¡å—ç»“æ„</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msubsup><mi>h</mi><mi>i</mi><mrow><mo mathvariant=\"normal\">â€²</mo><mi>k</mi></mrow></msubsup><mo>=</mo><msub><mi>M</mi><mi>k</mi></msub><mrow><mo fence=\"true\">[</mo><mtext>RMSNorm</mtext><mo stretchy=\"false\">(</mo><msubsup><mi>h</mi><mi>i</mi><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mo stretchy=\"false\">)</mo><mo>âŠ•</mo><mtext>RMSNorm</mtext><mo stretchy=\"false\">(</mo><mtext>Emb</mtext><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mrow><mi>i</mi><mo>+</mo><mi>k</mi></mrow></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\">h_i&#x27;^{k} = M_k \\left[ \\text{RMSNorm}(h_i^{k-1}) \\oplus \\text{RMSNorm}(\\text{Emb}(t_{i+k})) \\right]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1461em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">â€²</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2491em;vertical-align:-0.35em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">[</span></span><span class=\"mord text\"><span class=\"mord\">RMSNorm</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-2.433em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.267em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âŠ•</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord text\"><span class=\"mord\">RMSNorm</span></span><span class=\"mopen\">(</span><span class=\"mord text\"><span class=\"mord\">Emb</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mclose\">))</span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">]</span></span></span></span></span></span></span></p>\n</li>\n<li>\n<p><strong>æŸå¤±å‡½æ•°</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi mathvariant=\"script\">L</mi><mtext>Total</mtext></msub><mo>=</mo><msub><mi mathvariant=\"script\">L</mi><mtext>main</mtext></msub><mo>+</mo><mfrac><mi>Î»</mi><mi>D</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>D</mi></munderover><msubsup><mi mathvariant=\"script\">L</mi><mtext>MTP</mtext><mi>k</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">\\mathcal{L}_{\\text{Total}} = \\mathcal{L}_{\\text{main}} + \\frac{\\lambda}{D} \\sum_{k=1}^{D} \\mathcal{L}_{\\text{MTP}}^{k}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">Total</span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3175em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">main</span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.1304em;vertical-align:-1.3021em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">Î»</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283em;\"><span style=\"top:-1.8479em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">âˆ‘</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3021em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathcal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">MTP</span></span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n</li>\n</ul>\n<p><img src=\"/img/user/é™„ä»¶/Pasted image 20250426222216.png\" alt=\"Pasted image 20250426222216.png\"></p>\n<h2 id=\"æ€§èƒ½å¯¹æ¯”\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ€§èƒ½å¯¹æ¯”\"><span>æ€§èƒ½å¯¹æ¯”</span></a></h2>\n<table>\n<thead>\n<tr>\n<th>æŒ‡æ ‡</th>\n<th>V2 (160ä¸“å®¶)</th>\n<th>V3 (256ä¸“å®¶)</th>\n<th>æå‡å¹…åº¦</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>è®­ç»ƒé€Ÿåº¦</td>\n<td>1.2x</td>\n<td><strong>1.8x</strong></td>\n<td>50%â†‘</td>\n</tr>\n<tr>\n<td>æ˜¾å­˜å ç”¨</td>\n<td>32GB</td>\n<td>28GB</td>\n<td>12.5%â†“</td>\n</tr>\n<tr>\n<td>æ”¶æ•›æ­¥æ•°</td>\n<td>150k</td>\n<td>90k</td>\n<td>40%â†“</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"å®ç°è§„èŒƒ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å®ç°è§„èŒƒ\"><span>å®ç°è§„èŒƒ</span></a></h2>\n<p>âš ï¸ <strong>å…³é”®æ³¨æ„äº‹é¡¹</strong>ï¼š</p>\n<ol>\n<li>å…±äº«åµŒå…¥çŸ©é˜µéœ€ä¿æŒ<span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mrow><mi>d</mi><mo>Ã—</mo><mi>d</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^{dÃ—d}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mbin mtight\">Ã—</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span></span></span></span>ç»´åº¦ä¸€è‡´æ€§</li>\n<li>åºåˆ—æˆªæ–­éœ€æ»¡è¶³<span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mo>âˆ’</mo><mi>k</mi><mo>â‰¥</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">T-k \\geq 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8304em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â‰¥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>çº¦æŸæ¡ä»¶</li>\n<li>æ¢¯åº¦ç´¯ç§¯é‡‡ç”¨åˆ†é˜¶æ®µæ›´æ–°ç­–ç•¥</li>\n</ol>\n<h2 id=\"åˆ›æ–°å¯ç¤º\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åˆ›æ–°å¯ç¤º\"><span>åˆ›æ–°å¯ç¤º</span></a></h2>\n<p>ğŸ’¡ <strong>ä¸‰é˜¶çªç ´æ¶æ„</strong>ï¼š</p>\n<ol>\n<li><strong>ç»“æ„åˆ›æ–°</strong>ï¼šå…±äº«ä¸“å®¶æœºåˆ¶å®ç°è®¡ç®—/å­˜å‚¨æœ€ä¼˜æ¯”</li>\n<li><strong>ç®—æ³•åˆ›æ–°</strong>ï¼šBiasåŠ¨æ€è·¯ç”±è¾¾æˆè‡ªå‡è¡¡è´Ÿè½½</li>\n<li><strong>ç›®æ ‡åˆ›æ–°</strong>ï¼šå› æœé“¾ä¿æŒçš„å¤štokené¢„æµ‹</li>\n</ol>\n<h2 id=\"åº”ç”¨è·¯çº¿å›¾\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åº”ç”¨è·¯çº¿å›¾\"><span>åº”ç”¨è·¯çº¿å›¾</span></a></h2>\n<p>âœ… <strong>å®æ–½æ­¥éª¤</strong>ï¼š</p>\n<ol>\n<li>ä¸“å®¶åˆ†é…ç­–ç•¥éªŒè¯ï¼ˆ1-2å‘¨ï¼‰</li>\n<li>è·¯ç”±åç½®é¡¹è°ƒå‚ï¼ˆ3-5å¤©ï¼‰</li>\n<li>å¤šGPUé€šä¿¡ä¼˜åŒ–ï¼ˆ2-4å‘¨ï¼‰</li>\n</ol>\n<p>â— <strong>å¸¸è§è¯¯åŒº</strong>ï¼š</p>\n<ul>\n<li>ç›´æ¥ç§»æ¤V2çš„softmaxè·¯ç”±æœºåˆ¶</li>\n<li>å¿½ç•¥ä¸“å®¶é—´çš„è®¾å¤‡é€šä¿¡å¼€é”€</li>\n<li>è¿‡æ—©å†»ç»“å…±äº«ä¸“å®¶å‚æ•°</li>\n</ul>\n<blockquote>\n<p>åŸå§‹å‡ºå¤„ï¼š<a href=\"https://zhuanlan.zhihu.com/p/18056041194\" target=\"_blank\" rel=\"noopener noreferrer\">DeepSeek-V3 Technical Report</a></p>\n</blockquote>\n<div class=\"language-artifact line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"artifact\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span>id: performance_comparison</span></span>\n<span class=\"line\"><span>name: æ€§èƒ½å¯¹æ¯”è¡¨</span></span>\n<span class=\"line\"><span>type: markdown</span></span>\n<span class=\"line\"><span>content: |-</span></span>\n<span class=\"line\"><span>  ## åŸºå‡†æµ‹è¯•ç»“æœ</span></span>\n<span class=\"line\"><span>  | æµ‹è¯•åœºæ™¯       | ååé‡(tokens/s) | å»¶è¿Ÿ(ms) | å‡†ç¡®ç‡   |</span></span>\n<span class=\"line\"><span>  |----------------|------------------|----------|----------|</span></span>\n<span class=\"line\"><span>  | çŸ­æ–‡æœ¬æ¨ç†     | 5800             | 18.2     | 89.7%    |</span></span>\n<span class=\"line\"><span>  | é•¿åºåˆ—ç”Ÿæˆ     | 3200             | 42.5     | 91.2%    |</span></span>\n<span class=\"line\"><span>  | å¤šè½®å¯¹è¯       | 4500             | 27.8     | 93.4%    |</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","env":{"base":"/","filePath":"/Users/qianyuhe/Desktop/my-project/docs/notes_bak/å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /Common Modelså¸¸è§æ¨¡å‹/DeepSeekç³»åˆ—/DeepSeek-V3.md","filePathRelative":"notes_bak/å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /Common Modelså¸¸è§æ¨¡å‹/DeepSeekç³»åˆ—/DeepSeek-V3.md","frontmatter":{"dg-publish":true,"dg-permalink":"/å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /Common-Modelså¸¸è§æ¨¡å‹/DeepSeekç³»åˆ—/DeepSeek-V3","dg-home":false,"dg-description":"åœ¨æ­¤è¾“å…¥ç¬”è®°çš„æè¿°","dg-hide":false,"dg-hide-title":false,"dg-show-backlinks":true,"dg-show-local-graph":true,"dg-show-inline-title":true,"dg-pinned":false,"dg-passphrase":"åœ¨æ­¤è¾“å…¥è®¿é—®å¯†ç ","dg-enable-mathjax":false,"dg-enable-mermaid":false,"dg-enable-uml":false,"dg-note-icon":0,"dg-enable-dataview":false,"tags":["NLP"],"permalink":"/å¤§è¯­è¨€æ¨¡å‹å­¦ä¹ /Common-Modelså¸¸è§æ¨¡å‹/DeepSeekç³»åˆ—/DeepSeek-V3/","dgShowBacklinks":true,"dgShowLocalGraph":true,"dgShowInlineTitle":true,"dgPassFrontmatter":true,"noteIcon":0,"created":"2025-04-26T14:21:34.239Z","updated":"2025-04-26T14:22:18.128Z","title":"DeepSeek-V3","createTime":"2025/05/13 17:33:53"},"sfcBlocks":{"template":{"type":"template","content":"<template><h2 id=\"å…ƒæ•°æ®\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å…ƒæ•°æ®\"><span>å…ƒæ•°æ®</span></a></h2>\n<p><strong>åˆ†ç±»</strong>ï¼šäººå·¥æ™ºèƒ½æ¨¡å‹æ¶æ„<br>\n<strong>æ ‡ç­¾</strong>ï¼šDeepSeek-V3, MoEç»“æ„, åŠ¨æ€è·¯ç”±, å¤štokené¢„æµ‹<br>\n<strong>æ—¥æœŸ</strong>ï¼š2025å¹´4æœˆ26æ—¥</p>\n<h2 id=\"æ ¸å¿ƒæ¶æ„æ¼”è¿›\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ ¸å¿ƒæ¶æ„æ¼”è¿›\"><span>æ ¸å¿ƒæ¶æ„æ¼”è¿›</span></a></h2>\n<h3 id=\"æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°\"><span>æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°</span></a></h3>\n<ul>\n<li><strong>ç»†ç²’åº¦ä¸“å®¶åˆ†é…</strong>ï¼š256ä¸ªè·¯ç”±ä¸“å®¶é‡‡ç”¨å…±äº«/ä¸“å±æ··åˆé…ç½®</li>\n<li><strong>è·¯ç”±æ¿€æ´»å‡½æ•°</strong>ï¼š<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>Gate</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>Ïƒ</mi><mo stretchy=\"false\">(</mo><msub><mi>W</mi><mi>g</mi></msub><mo>â‹…</mo><mi>x</mi><mo>+</mo><msub><mi>b</mi><mi>g</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\text{Gate}(x) = \\sigma(W_g \\cdot x + b_g)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">Gate</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">Ïƒ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p>\nå°†softmaxæ›¿æ¢ä¸ºsigmoidï¼Œç¼“è§£ä¸“å®¶æ•°é‡å€å¢å¸¦æ¥çš„æ¿€æ´»å†²çª</li>\n<li><strong>åŠ¨æ€è´Ÿè½½å‡è¡¡</strong>ï¼š<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mtext>SelectionScore</mtext><mi>i</mi></msub><mo>=</mo><msub><mtext>ExpertScore</mtext><mi>i</mi></msub><mo>+</mo><msub><mi>Î±</mi><mi>i</mi></msub><mo>â‹…</mo><mi>Î²</mi></mrow><annotation encoding=\"application/x-tex\">\\text{SelectionScore}_i = \\text{ExpertScore}_i + \\alpha_i \\cdot \\beta\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">SelectionScore</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9275em;vertical-align:-0.2441em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">ExpertScore</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2175em;\"><span style=\"top:-2.4559em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2441em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5945em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span></span></span></span></span></p>\né€šè¿‡å¯å­¦ä¹ åç½®é¡¹<span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span></span></span></span>è‡ªåŠ¨è°ƒèŠ‚ä¸“å®¶è´Ÿè½½\n<img src=\"/img/user/é™„ä»¶/Pasted image 20250426222200.png\" alt=\"Pasted image 20250426222200.png\"></li>\n</ul>\n<h3 id=\"é€šä¿¡ä¼˜åŒ–æœºåˆ¶\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#é€šä¿¡ä¼˜åŒ–æœºåˆ¶\"><span>é€šä¿¡ä¼˜åŒ–æœºåˆ¶</span></a></h3>\n<ul>\n<li>æ— tokenä¸¢å¼ƒè®¾è®¡</li>\n<li>åºåˆ—çº§è¾…åŠ©æŸå¤±è¡¥å¿</li>\n<li>è®¾å¤‡é—´é€šä¿¡å¹¶è¡ŒåŠ é€Ÿ</li>\n</ul>\n<h2 id=\"å¤šç›®æ ‡è®­ç»ƒä½“ç³»\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¤šç›®æ ‡è®­ç»ƒä½“ç³»\"><span>å¤šç›®æ ‡è®­ç»ƒä½“ç³»</span></a></h2>\n<h3 id=\"å¤štokené¢„æµ‹-mtp\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¤štokené¢„æµ‹-mtp\"><span>å¤štokené¢„æµ‹(MTP)</span></a></h3>\n<ul>\n<li>\n<p><strong>é¢„æµ‹è·¨åº¦</strong>ï¼šD=4ä¸ªè¿ç»­token</p>\n</li>\n<li>\n<p><strong>æ¨¡å—ç»“æ„</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msubsup><mi>h</mi><mi>i</mi><mrow><mo mathvariant=\"normal\">â€²</mo><mi>k</mi></mrow></msubsup><mo>=</mo><msub><mi>M</mi><mi>k</mi></msub><mrow><mo fence=\"true\">[</mo><mtext>RMSNorm</mtext><mo stretchy=\"false\">(</mo><msubsup><mi>h</mi><mi>i</mi><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mo stretchy=\"false\">)</mo><mo>âŠ•</mo><mtext>RMSNorm</mtext><mo stretchy=\"false\">(</mo><mtext>Emb</mtext><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mrow><mi>i</mi><mo>+</mo><mi>k</mi></mrow></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\">h_i&#x27;^{k} = M_k \\left[ \\text{RMSNorm}(h_i^{k-1}) \\oplus \\text{RMSNorm}(\\text{Emb}(t_{i+k})) \\right]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1461em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">â€²</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2491em;vertical-align:-0.35em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">[</span></span><span class=\"mord text\"><span class=\"mord\">RMSNorm</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-2.433em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.267em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âŠ•</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord text\"><span class=\"mord\">RMSNorm</span></span><span class=\"mopen\">(</span><span class=\"mord text\"><span class=\"mord\">Emb</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mclose\">))</span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">]</span></span></span></span></span></span></span></p>\n</li>\n<li>\n<p><strong>æŸå¤±å‡½æ•°</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi mathvariant=\"script\">L</mi><mtext>Total</mtext></msub><mo>=</mo><msub><mi mathvariant=\"script\">L</mi><mtext>main</mtext></msub><mo>+</mo><mfrac><mi>Î»</mi><mi>D</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>D</mi></munderover><msubsup><mi mathvariant=\"script\">L</mi><mtext>MTP</mtext><mi>k</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">\\mathcal{L}_{\\text{Total}} = \\mathcal{L}_{\\text{main}} + \\frac{\\lambda}{D} \\sum_{k=1}^{D} \\mathcal{L}_{\\text{MTP}}^{k}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">Total</span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3175em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">main</span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.1304em;vertical-align:-1.3021em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">Î»</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283em;\"><span style=\"top:-1.8479em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">âˆ‘</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3021em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathcal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">MTP</span></span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n</li>\n</ul>\n<p><img src=\"/img/user/é™„ä»¶/Pasted image 20250426222216.png\" alt=\"Pasted image 20250426222216.png\"></p>\n<h2 id=\"æ€§èƒ½å¯¹æ¯”\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ€§èƒ½å¯¹æ¯”\"><span>æ€§èƒ½å¯¹æ¯”</span></a></h2>\n<table>\n<thead>\n<tr>\n<th>æŒ‡æ ‡</th>\n<th>V2 (160ä¸“å®¶)</th>\n<th>V3 (256ä¸“å®¶)</th>\n<th>æå‡å¹…åº¦</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>è®­ç»ƒé€Ÿåº¦</td>\n<td>1.2x</td>\n<td><strong>1.8x</strong></td>\n<td>50%â†‘</td>\n</tr>\n<tr>\n<td>æ˜¾å­˜å ç”¨</td>\n<td>32GB</td>\n<td>28GB</td>\n<td>12.5%â†“</td>\n</tr>\n<tr>\n<td>æ”¶æ•›æ­¥æ•°</td>\n<td>150k</td>\n<td>90k</td>\n<td>40%â†“</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"å®ç°è§„èŒƒ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å®ç°è§„èŒƒ\"><span>å®ç°è§„èŒƒ</span></a></h2>\n<p>âš ï¸ <strong>å…³é”®æ³¨æ„äº‹é¡¹</strong>ï¼š</p>\n<ol>\n<li>å…±äº«åµŒå…¥çŸ©é˜µéœ€ä¿æŒ<span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mrow><mi>d</mi><mo>Ã—</mo><mi>d</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^{dÃ—d}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mbin mtight\">Ã—</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span></span></span></span>ç»´åº¦ä¸€è‡´æ€§</li>\n<li>åºåˆ—æˆªæ–­éœ€æ»¡è¶³<span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mo>âˆ’</mo><mi>k</mi><mo>â‰¥</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">T-k \\geq 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8304em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â‰¥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>çº¦æŸæ¡ä»¶</li>\n<li>æ¢¯åº¦ç´¯ç§¯é‡‡ç”¨åˆ†é˜¶æ®µæ›´æ–°ç­–ç•¥</li>\n</ol>\n<h2 id=\"åˆ›æ–°å¯ç¤º\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åˆ›æ–°å¯ç¤º\"><span>åˆ›æ–°å¯ç¤º</span></a></h2>\n<p>ğŸ’¡ <strong>ä¸‰é˜¶çªç ´æ¶æ„</strong>ï¼š</p>\n<ol>\n<li><strong>ç»“æ„åˆ›æ–°</strong>ï¼šå…±äº«ä¸“å®¶æœºåˆ¶å®ç°è®¡ç®—/å­˜å‚¨æœ€ä¼˜æ¯”</li>\n<li><strong>ç®—æ³•åˆ›æ–°</strong>ï¼šBiasåŠ¨æ€è·¯ç”±è¾¾æˆè‡ªå‡è¡¡è´Ÿè½½</li>\n<li><strong>ç›®æ ‡åˆ›æ–°</strong>ï¼šå› æœé“¾ä¿æŒçš„å¤štokené¢„æµ‹</li>\n</ol>\n<h2 id=\"åº”ç”¨è·¯çº¿å›¾\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åº”ç”¨è·¯çº¿å›¾\"><span>åº”ç”¨è·¯çº¿å›¾</span></a></h2>\n<p>âœ… <strong>å®æ–½æ­¥éª¤</strong>ï¼š</p>\n<ol>\n<li>ä¸“å®¶åˆ†é…ç­–ç•¥éªŒè¯ï¼ˆ1-2å‘¨ï¼‰</li>\n<li>è·¯ç”±åç½®é¡¹è°ƒå‚ï¼ˆ3-5å¤©ï¼‰</li>\n<li>å¤šGPUé€šä¿¡ä¼˜åŒ–ï¼ˆ2-4å‘¨ï¼‰</li>\n</ol>\n<p>â— <strong>å¸¸è§è¯¯åŒº</strong>ï¼š</p>\n<ul>\n<li>ç›´æ¥ç§»æ¤V2çš„softmaxè·¯ç”±æœºåˆ¶</li>\n<li>å¿½ç•¥ä¸“å®¶é—´çš„è®¾å¤‡é€šä¿¡å¼€é”€</li>\n<li>è¿‡æ—©å†»ç»“å…±äº«ä¸“å®¶å‚æ•°</li>\n</ul>\n<blockquote>\n<p>åŸå§‹å‡ºå¤„ï¼š<a href=\"https://zhuanlan.zhihu.com/p/18056041194\" target=\"_blank\" rel=\"noopener noreferrer\">DeepSeek-V3 Technical Report</a></p>\n</blockquote>\n<div class=\"language-artifact line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"artifact\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span>id: performance_comparison</span></span>\n<span class=\"line\"><span>name: æ€§èƒ½å¯¹æ¯”è¡¨</span></span>\n<span class=\"line\"><span>type: markdown</span></span>\n<span class=\"line\"><span>content: |-</span></span>\n<span class=\"line\"><span>  ## åŸºå‡†æµ‹è¯•ç»“æœ</span></span>\n<span class=\"line\"><span>  | æµ‹è¯•åœºæ™¯       | ååé‡(tokens/s) | å»¶è¿Ÿ(ms) | å‡†ç¡®ç‡   |</span></span>\n<span class=\"line\"><span>  |----------------|------------------|----------|----------|</span></span>\n<span class=\"line\"><span>  | çŸ­æ–‡æœ¬æ¨ç†     | 5800             | 18.2     | 89.7%    |</span></span>\n<span class=\"line\"><span>  | é•¿åºåˆ—ç”Ÿæˆ     | 3200             | 42.5     | 91.2%    |</span></span>\n<span class=\"line\"><span>  | å¤šè½®å¯¹è¯       | 4500             | 27.8     | 93.4%    |</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></template>","contentStripped":"<h2 id=\"å…ƒæ•°æ®\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å…ƒæ•°æ®\"><span>å…ƒæ•°æ®</span></a></h2>\n<p><strong>åˆ†ç±»</strong>ï¼šäººå·¥æ™ºèƒ½æ¨¡å‹æ¶æ„<br>\n<strong>æ ‡ç­¾</strong>ï¼šDeepSeek-V3, MoEç»“æ„, åŠ¨æ€è·¯ç”±, å¤štokené¢„æµ‹<br>\n<strong>æ—¥æœŸ</strong>ï¼š2025å¹´4æœˆ26æ—¥</p>\n<h2 id=\"æ ¸å¿ƒæ¶æ„æ¼”è¿›\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ ¸å¿ƒæ¶æ„æ¼”è¿›\"><span>æ ¸å¿ƒæ¶æ„æ¼”è¿›</span></a></h2>\n<h3 id=\"æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°\"><span>æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°</span></a></h3>\n<ul>\n<li><strong>ç»†ç²’åº¦ä¸“å®¶åˆ†é…</strong>ï¼š256ä¸ªè·¯ç”±ä¸“å®¶é‡‡ç”¨å…±äº«/ä¸“å±æ··åˆé…ç½®</li>\n<li><strong>è·¯ç”±æ¿€æ´»å‡½æ•°</strong>ï¼š<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>Gate</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>Ïƒ</mi><mo stretchy=\"false\">(</mo><msub><mi>W</mi><mi>g</mi></msub><mo>â‹…</mo><mi>x</mi><mo>+</mo><msub><mi>b</mi><mi>g</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\text{Gate}(x) = \\sigma(W_g \\cdot x + b_g)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">Gate</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">Ïƒ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p>\nå°†softmaxæ›¿æ¢ä¸ºsigmoidï¼Œç¼“è§£ä¸“å®¶æ•°é‡å€å¢å¸¦æ¥çš„æ¿€æ´»å†²çª</li>\n<li><strong>åŠ¨æ€è´Ÿè½½å‡è¡¡</strong>ï¼š<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mtext>SelectionScore</mtext><mi>i</mi></msub><mo>=</mo><msub><mtext>ExpertScore</mtext><mi>i</mi></msub><mo>+</mo><msub><mi>Î±</mi><mi>i</mi></msub><mo>â‹…</mo><mi>Î²</mi></mrow><annotation encoding=\"application/x-tex\">\\text{SelectionScore}_i = \\text{ExpertScore}_i + \\alpha_i \\cdot \\beta\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">SelectionScore</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9275em;vertical-align:-0.2441em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">ExpertScore</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2175em;\"><span style=\"top:-2.4559em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2441em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5945em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Î±</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span></span></span></span></span></p>\né€šè¿‡å¯å­¦ä¹ åç½®é¡¹<span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Î²</span></span></span></span>è‡ªåŠ¨è°ƒèŠ‚ä¸“å®¶è´Ÿè½½\n<img src=\"/img/user/é™„ä»¶/Pasted image 20250426222200.png\" alt=\"Pasted image 20250426222200.png\"></li>\n</ul>\n<h3 id=\"é€šä¿¡ä¼˜åŒ–æœºåˆ¶\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#é€šä¿¡ä¼˜åŒ–æœºåˆ¶\"><span>é€šä¿¡ä¼˜åŒ–æœºåˆ¶</span></a></h3>\n<ul>\n<li>æ— tokenä¸¢å¼ƒè®¾è®¡</li>\n<li>åºåˆ—çº§è¾…åŠ©æŸå¤±è¡¥å¿</li>\n<li>è®¾å¤‡é—´é€šä¿¡å¹¶è¡ŒåŠ é€Ÿ</li>\n</ul>\n<h2 id=\"å¤šç›®æ ‡è®­ç»ƒä½“ç³»\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¤šç›®æ ‡è®­ç»ƒä½“ç³»\"><span>å¤šç›®æ ‡è®­ç»ƒä½“ç³»</span></a></h2>\n<h3 id=\"å¤štokené¢„æµ‹-mtp\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¤štokené¢„æµ‹-mtp\"><span>å¤štokené¢„æµ‹(MTP)</span></a></h3>\n<ul>\n<li>\n<p><strong>é¢„æµ‹è·¨åº¦</strong>ï¼šD=4ä¸ªè¿ç»­token</p>\n</li>\n<li>\n<p><strong>æ¨¡å—ç»“æ„</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msubsup><mi>h</mi><mi>i</mi><mrow><mo mathvariant=\"normal\">â€²</mo><mi>k</mi></mrow></msubsup><mo>=</mo><msub><mi>M</mi><mi>k</mi></msub><mrow><mo fence=\"true\">[</mo><mtext>RMSNorm</mtext><mo stretchy=\"false\">(</mo><msubsup><mi>h</mi><mi>i</mi><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mo stretchy=\"false\">)</mo><mo>âŠ•</mo><mtext>RMSNorm</mtext><mo stretchy=\"false\">(</mo><mtext>Emb</mtext><mo stretchy=\"false\">(</mo><msub><mi>t</mi><mrow><mi>i</mi><mo>+</mo><mi>k</mi></mrow></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\">h_i&#x27;^{k} = M_k \\left[ \\text{RMSNorm}(h_i^{k-1}) \\oplus \\text{RMSNorm}(\\text{Emb}(t_{i+k})) \\right]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1461em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">â€²</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2491em;vertical-align:-0.35em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">[</span></span><span class=\"mord text\"><span class=\"mord\">RMSNorm</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-2.433em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.267em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âŠ•</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord text\"><span class=\"mord\">RMSNorm</span></span><span class=\"mopen\">(</span><span class=\"mord text\"><span class=\"mord\">Emb</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mclose\">))</span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">]</span></span></span></span></span></span></span></p>\n</li>\n<li>\n<p><strong>æŸå¤±å‡½æ•°</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi mathvariant=\"script\">L</mi><mtext>Total</mtext></msub><mo>=</mo><msub><mi mathvariant=\"script\">L</mi><mtext>main</mtext></msub><mo>+</mo><mfrac><mi>Î»</mi><mi>D</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>D</mi></munderover><msubsup><mi mathvariant=\"script\">L</mi><mtext>MTP</mtext><mi>k</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">\\mathcal{L}_{\\text{Total}} = \\mathcal{L}_{\\text{main}} + \\frac{\\lambda}{D} \\sum_{k=1}^{D} \\mathcal{L}_{\\text{MTP}}^{k}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">Total</span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3175em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">main</span></span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.1304em;vertical-align:-1.3021em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">Î»</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283em;\"><span style=\"top:-1.8479em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">âˆ‘</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3021em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathcal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">MTP</span></span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n</li>\n</ul>\n<p><img src=\"/img/user/é™„ä»¶/Pasted image 20250426222216.png\" alt=\"Pasted image 20250426222216.png\"></p>\n<h2 id=\"æ€§èƒ½å¯¹æ¯”\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ€§èƒ½å¯¹æ¯”\"><span>æ€§èƒ½å¯¹æ¯”</span></a></h2>\n<table>\n<thead>\n<tr>\n<th>æŒ‡æ ‡</th>\n<th>V2 (160ä¸“å®¶)</th>\n<th>V3 (256ä¸“å®¶)</th>\n<th>æå‡å¹…åº¦</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>è®­ç»ƒé€Ÿåº¦</td>\n<td>1.2x</td>\n<td><strong>1.8x</strong></td>\n<td>50%â†‘</td>\n</tr>\n<tr>\n<td>æ˜¾å­˜å ç”¨</td>\n<td>32GB</td>\n<td>28GB</td>\n<td>12.5%â†“</td>\n</tr>\n<tr>\n<td>æ”¶æ•›æ­¥æ•°</td>\n<td>150k</td>\n<td>90k</td>\n<td>40%â†“</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"å®ç°è§„èŒƒ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å®ç°è§„èŒƒ\"><span>å®ç°è§„èŒƒ</span></a></h2>\n<p>âš ï¸ <strong>å…³é”®æ³¨æ„äº‹é¡¹</strong>ï¼š</p>\n<ol>\n<li>å…±äº«åµŒå…¥çŸ©é˜µéœ€ä¿æŒ<span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mrow><mi>d</mi><mo>Ã—</mo><mi>d</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^{dÃ—d}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mbin mtight\">Ã—</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span></span></span></span>ç»´åº¦ä¸€è‡´æ€§</li>\n<li>åºåˆ—æˆªæ–­éœ€æ»¡è¶³<span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mo>âˆ’</mo><mi>k</mi><mo>â‰¥</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">T-k \\geq 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8304em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â‰¥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>çº¦æŸæ¡ä»¶</li>\n<li>æ¢¯åº¦ç´¯ç§¯é‡‡ç”¨åˆ†é˜¶æ®µæ›´æ–°ç­–ç•¥</li>\n</ol>\n<h2 id=\"åˆ›æ–°å¯ç¤º\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åˆ›æ–°å¯ç¤º\"><span>åˆ›æ–°å¯ç¤º</span></a></h2>\n<p>ğŸ’¡ <strong>ä¸‰é˜¶çªç ´æ¶æ„</strong>ï¼š</p>\n<ol>\n<li><strong>ç»“æ„åˆ›æ–°</strong>ï¼šå…±äº«ä¸“å®¶æœºåˆ¶å®ç°è®¡ç®—/å­˜å‚¨æœ€ä¼˜æ¯”</li>\n<li><strong>ç®—æ³•åˆ›æ–°</strong>ï¼šBiasåŠ¨æ€è·¯ç”±è¾¾æˆè‡ªå‡è¡¡è´Ÿè½½</li>\n<li><strong>ç›®æ ‡åˆ›æ–°</strong>ï¼šå› æœé“¾ä¿æŒçš„å¤štokené¢„æµ‹</li>\n</ol>\n<h2 id=\"åº”ç”¨è·¯çº¿å›¾\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åº”ç”¨è·¯çº¿å›¾\"><span>åº”ç”¨è·¯çº¿å›¾</span></a></h2>\n<p>âœ… <strong>å®æ–½æ­¥éª¤</strong>ï¼š</p>\n<ol>\n<li>ä¸“å®¶åˆ†é…ç­–ç•¥éªŒè¯ï¼ˆ1-2å‘¨ï¼‰</li>\n<li>è·¯ç”±åç½®é¡¹è°ƒå‚ï¼ˆ3-5å¤©ï¼‰</li>\n<li>å¤šGPUé€šä¿¡ä¼˜åŒ–ï¼ˆ2-4å‘¨ï¼‰</li>\n</ol>\n<p>â— <strong>å¸¸è§è¯¯åŒº</strong>ï¼š</p>\n<ul>\n<li>ç›´æ¥ç§»æ¤V2çš„softmaxè·¯ç”±æœºåˆ¶</li>\n<li>å¿½ç•¥ä¸“å®¶é—´çš„è®¾å¤‡é€šä¿¡å¼€é”€</li>\n<li>è¿‡æ—©å†»ç»“å…±äº«ä¸“å®¶å‚æ•°</li>\n</ul>\n<blockquote>\n<p>åŸå§‹å‡ºå¤„ï¼š<a href=\"https://zhuanlan.zhihu.com/p/18056041194\" target=\"_blank\" rel=\"noopener noreferrer\">DeepSeek-V3 Technical Report</a></p>\n</blockquote>\n<div class=\"language-artifact line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"artifact\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span>id: performance_comparison</span></span>\n<span class=\"line\"><span>name: æ€§èƒ½å¯¹æ¯”è¡¨</span></span>\n<span class=\"line\"><span>type: markdown</span></span>\n<span class=\"line\"><span>content: |-</span></span>\n<span class=\"line\"><span>  ## åŸºå‡†æµ‹è¯•ç»“æœ</span></span>\n<span class=\"line\"><span>  | æµ‹è¯•åœºæ™¯       | ååé‡(tokens/s) | å»¶è¿Ÿ(ms) | å‡†ç¡®ç‡   |</span></span>\n<span class=\"line\"><span>  |----------------|------------------|----------|----------|</span></span>\n<span class=\"line\"><span>  | çŸ­æ–‡æœ¬æ¨ç†     | 5800             | 18.2     | 89.7%    |</span></span>\n<span class=\"line\"><span>  | é•¿åºåˆ—ç”Ÿæˆ     | 3200             | 42.5     | 91.2%    |</span></span>\n<span class=\"line\"><span>  | å¤šè½®å¯¹è¯       | 4500             | 27.8     | 93.4%    |</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n## å…ƒæ•°æ®\n**åˆ†ç±»**ï¼šäººå·¥æ™ºèƒ½æ¨¡å‹æ¶æ„  \n**æ ‡ç­¾**ï¼šDeepSeek-V3, MoEç»“æ„, åŠ¨æ€è·¯ç”±, å¤štokené¢„æµ‹  \n**æ—¥æœŸ**ï¼š2025å¹´4æœˆ26æ—¥\n\n\n## æ ¸å¿ƒæ¶æ„æ¼”è¿›\n\n### æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°\n- **ç»†ç²’åº¦ä¸“å®¶åˆ†é…**ï¼š256ä¸ªè·¯ç”±ä¸“å®¶é‡‡ç”¨å…±äº«/ä¸“å±æ··åˆé…ç½®\n- **è·¯ç”±æ¿€æ´»å‡½æ•°**ï¼š\n  $$\n  \\text{Gate}(x) = \\sigma(W_g \\cdot x + b_g)\n  $$\n  å°†softmaxæ›¿æ¢ä¸ºsigmoidï¼Œç¼“è§£ä¸“å®¶æ•°é‡å€å¢å¸¦æ¥çš„æ¿€æ´»å†²çª\n- **åŠ¨æ€è´Ÿè½½å‡è¡¡**ï¼š\n  $$\n  \\text{SelectionScore}_i = \\text{ExpertScore}_i + \\alpha_i \\cdot \\beta\n  $$\n  é€šè¿‡å¯å­¦ä¹ åç½®é¡¹$\\beta$è‡ªåŠ¨è°ƒèŠ‚ä¸“å®¶è´Ÿè½½\n![Pasted image 20250426222200.png](/img/user/%E9%99%84%E4%BB%B6/Pasted%20image%2020250426222200.png)\n\n\n### é€šä¿¡ä¼˜åŒ–æœºåˆ¶\n- æ— tokenä¸¢å¼ƒè®¾è®¡\n- åºåˆ—çº§è¾…åŠ©æŸå¤±è¡¥å¿\n- è®¾å¤‡é—´é€šä¿¡å¹¶è¡ŒåŠ é€Ÿ\n\n\n## å¤šç›®æ ‡è®­ç»ƒä½“ç³»\n\n### å¤štokené¢„æµ‹(MTP)\n- **é¢„æµ‹è·¨åº¦**ï¼šD=4ä¸ªè¿ç»­token\n- **æ¨¡å—ç»“æ„**ï¼š\n  $$\n  h_i'^{k} = M_k \\left[ \\text{RMSNorm}(h_i^{k-1}) \\oplus \\text{RMSNorm}(\\text{Emb}(t_{i+k})) \\right]\n  $$\n  \n- **æŸå¤±å‡½æ•°**ï¼š\n  $$\n  \\mathcal{L}_{\\text{Total}} = \\mathcal{L}_{\\text{main}} + \\frac{\\lambda}{D} \\sum_{k=1}^{D} \\mathcal{L}_{\\text{MTP}}^{k}\n  $$\n\n![Pasted image 20250426222216.png](/img/user/%E9%99%84%E4%BB%B6/Pasted%20image%2020250426222216.png)\n\n\n## æ€§èƒ½å¯¹æ¯”\n| æŒ‡æ ‡        | V2 (160ä¸“å®¶) | V3 (256ä¸“å®¶) | æå‡å¹…åº¦ |\n|-------------|-------------|-------------|---------|\n| è®­ç»ƒé€Ÿåº¦    | 1.2x        | **1.8x**    | 50%â†‘    |\n| æ˜¾å­˜å ç”¨    | 32GB        | 28GB        | 12.5%â†“  |\n| æ”¶æ•›æ­¥æ•°    | 150k        | 90k         | 40%â†“    |\n\n\n## å®ç°è§„èŒƒ\nâš ï¸ **å…³é”®æ³¨æ„äº‹é¡¹**ï¼š\n1. å…±äº«åµŒå…¥çŸ©é˜µéœ€ä¿æŒ$\\mathbb{R}^{dÃ—d}$ç»´åº¦ä¸€è‡´æ€§\n2. åºåˆ—æˆªæ–­éœ€æ»¡è¶³$T-k \\geq 1$çº¦æŸæ¡ä»¶\n3. æ¢¯åº¦ç´¯ç§¯é‡‡ç”¨åˆ†é˜¶æ®µæ›´æ–°ç­–ç•¥\n\n\n## åˆ›æ–°å¯ç¤º\nğŸ’¡ **ä¸‰é˜¶çªç ´æ¶æ„**ï¼š\n1. **ç»“æ„åˆ›æ–°**ï¼šå…±äº«ä¸“å®¶æœºåˆ¶å®ç°è®¡ç®—/å­˜å‚¨æœ€ä¼˜æ¯”\n2. **ç®—æ³•åˆ›æ–°**ï¼šBiasåŠ¨æ€è·¯ç”±è¾¾æˆè‡ªå‡è¡¡è´Ÿè½½\n3. **ç›®æ ‡åˆ›æ–°**ï¼šå› æœé“¾ä¿æŒçš„å¤štokené¢„æµ‹\n\n\n## åº”ç”¨è·¯çº¿å›¾\nâœ… **å®æ–½æ­¥éª¤**ï¼š\n1. ä¸“å®¶åˆ†é…ç­–ç•¥éªŒè¯ï¼ˆ1-2å‘¨ï¼‰\n2. è·¯ç”±åç½®é¡¹è°ƒå‚ï¼ˆ3-5å¤©ï¼‰\n3. å¤šGPUé€šä¿¡ä¼˜åŒ–ï¼ˆ2-4å‘¨ï¼‰\n\nâ— **å¸¸è§è¯¯åŒº**ï¼š\n- ç›´æ¥ç§»æ¤V2çš„softmaxè·¯ç”±æœºåˆ¶\n- å¿½ç•¥ä¸“å®¶é—´çš„è®¾å¤‡é€šä¿¡å¼€é”€\n- è¿‡æ—©å†»ç»“å…±äº«ä¸“å®¶å‚æ•°\n\n> åŸå§‹å‡ºå¤„ï¼š[DeepSeek-V3 Technical Report](https://zhuanlan.zhihu.com/p/18056041194)\n\n````artifact\nid: performance_comparison\nname: æ€§èƒ½å¯¹æ¯”è¡¨\ntype: markdown\ncontent: |-\n  ## åŸºå‡†æµ‹è¯•ç»“æœ\n  | æµ‹è¯•åœºæ™¯       | ååé‡(tokens/s) | å»¶è¿Ÿ(ms) | å‡†ç¡®ç‡   |\n  |----------------|------------------|----------|----------|\n  | çŸ­æ–‡æœ¬æ¨ç†     | 5800             | 18.2     | 89.7%    |\n  | é•¿åºåˆ—ç”Ÿæˆ     | 3200             | 42.5     | 91.2%    |\n  | å¤šè½®å¯¹è¯       | 4500             | 27.8     | 93.4%    |\n````","excerpt":"","includedFiles":[],"tasklistId":0,"title":"","headers":[{"level":2,"title":"å…ƒæ•°æ®","slug":"å…ƒæ•°æ®","link":"#å…ƒæ•°æ®","children":[]},{"level":2,"title":"æ ¸å¿ƒæ¶æ„æ¼”è¿›","slug":"æ ¸å¿ƒæ¶æ„æ¼”è¿›","link":"#æ ¸å¿ƒæ¶æ„æ¼”è¿›","children":[{"level":3,"title":"æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°","slug":"æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°","link":"#æ··åˆä¸“å®¶ç³»ç»Ÿé©æ–°","children":[]},{"level":3,"title":"é€šä¿¡ä¼˜åŒ–æœºåˆ¶","slug":"é€šä¿¡ä¼˜åŒ–æœºåˆ¶","link":"#é€šä¿¡ä¼˜åŒ–æœºåˆ¶","children":[]}]},{"level":2,"title":"å¤šç›®æ ‡è®­ç»ƒä½“ç³»","slug":"å¤šç›®æ ‡è®­ç»ƒä½“ç³»","link":"#å¤šç›®æ ‡è®­ç»ƒä½“ç³»","children":[{"level":3,"title":"å¤štokené¢„æµ‹(MTP)","slug":"å¤štokené¢„æµ‹-mtp","link":"#å¤štokené¢„æµ‹-mtp","children":[]}]},{"level":2,"title":"æ€§èƒ½å¯¹æ¯”","slug":"æ€§èƒ½å¯¹æ¯”","link":"#æ€§èƒ½å¯¹æ¯”","children":[]},{"level":2,"title":"å®ç°è§„èŒƒ","slug":"å®ç°è§„èŒƒ","link":"#å®ç°è§„èŒƒ","children":[]},{"level":2,"title":"åˆ›æ–°å¯ç¤º","slug":"åˆ›æ–°å¯ç¤º","link":"#åˆ›æ–°å¯ç¤º","children":[]},{"level":2,"title":"åº”ç”¨è·¯çº¿å›¾","slug":"åº”ç”¨è·¯çº¿å›¾","link":"#åº”ç”¨è·¯çº¿å›¾","children":[]}]}}
