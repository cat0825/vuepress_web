---
{"dg-publish":true,"dg-permalink":"/å¤§è¯­è¨€æ¨¡åž‹å­¦ä¹ /Common-Modelså¸¸è§æ¨¡åž‹/GLMç³»åˆ—/GLM2","dg-home":false,"dg-description":"åœ¨æ­¤è¾“å…¥ç¬”è®°çš„æè¿°","dg-hide":false,"dg-hide-title":false,"dg-show-backlinks":true,"dg-show-local-graph":true,"dg-show-inline-title":true,"dg-pinned":false,"dg-passphrase":"åœ¨æ­¤è¾“å…¥è®¿é—®å¯†ç ","dg-enable-mathjax":false,"dg-enable-mermaid":false,"dg-enable-uml":false,"dg-note-icon":0,"dg-enable-dataview":false,"tags":["NLP"],"permalink":"/å¤§è¯­è¨€æ¨¡åž‹å­¦ä¹ /Common-Modelså¸¸è§æ¨¡åž‹/GLMç³»åˆ—/GLM2/","dgShowBacklinks":true,"dgShowLocalGraph":true,"dgShowInlineTitle":true,"dgPassFrontmatter":true,"noteIcon":0,"created":"2025-04-25T10:48:16.000+08:00","updated":"2025-04-25T10:50:09.000+08:00"}
---



# ChatGLM2-6B æ¨¡åž‹è§£æžï¼šè§£ç å™¨æž¶æž„ä¸Žè®­ç»ƒç›®æ ‡
å…ƒæ•°æ®ï¼š

- åˆ†ç±»ï¼šäººå·¥æ™ºèƒ½
- æ ‡ç­¾ï¼šChatGLM2, è§£ç å™¨, äººå·¥æ™ºèƒ½, æ¨¡åž‹è®­ç»ƒ, è‡ªå›žå½’
- æ—¥æœŸï¼š2025å¹´4æœˆ12æ—¥

## æ¨¡åž‹ç»“æž„æ¦‚è¿°
ChatGLM2-6B é‡‡ç”¨äº†å®Œå…¨çš„ Decoder-only æž¶æž„ï¼Œç»“åˆäº†ä»¥ä¸‹æŠ€æœ¯ç‰¹æ€§ï¼š
- **RoPE**ï¼ˆæ—‹è½¬ä½ç½®ç¼–ç ï¼‰ç”¨äºŽå¢žå¼ºä½ç½®ç¼–ç èƒ½åŠ›ã€‚
- æ¿€æ´»å‡½æ•°ä»Ž **Gelu** è½¬æ¢ä¸º **SwiGLU**ã€‚
- ä½¿ç”¨ **Pre-RMSnorm** è§„èŒƒåŒ–æŠ€æœ¯ã€‚
- å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ï¼ˆMHAï¼‰ä¼˜åŒ–ä¸ºå¤šæŸ¥è¯¢æ³¨æ„åŠ›ï¼ˆMQAï¼‰ï¼Œæé«˜æŽ¨ç†æ•ˆçŽ‡ã€‚
- åŸºäºŽ **FalshAttention** çš„ä¸Šä¸‹æ–‡é•¿åº¦ä»Ž 2K å¢žåŠ åˆ° 32Kï¼Œå¹¶åœ¨å¯¹è¯é˜¶æ®µé‡‡ç”¨ 8K ä¸Šä¸‹æ–‡è¿›è¡Œè®­ç»ƒã€‚


## è®­ç»ƒç›®æ ‡
ChatGLM2-6B ä½¿ç”¨äº† GLM çš„æ··åˆç›®æ ‡å‡½æ•°ï¼Œç»è¿‡äº† 1.5 ä¸‡äº¿ä¸­è‹±æ ‡è¯†ç¬¦çš„é¢„è®­ç»ƒï¼Œå¹¶è¿›è¡Œäº†äººç±»åå¥½å¯¹é½è®­ç»ƒã€‚


## è§£ç å™¨æž¶æž„çš„é€‰æ‹©

### ä¸ºä»€ä¹ˆé€‰æ‹© Decoder-only æž¶æž„ï¼Ÿ
å¤šè½®å¯¹è¯ä¸­ï¼Œä½¿ç”¨ prefix-decoder éœ€è¦æž„é€ å¤šä¸ªæ•°æ®æ¥è®­ç»ƒï¼Œè€Œ decoder-only æž¶æž„é€šè¿‡ä½¿ç”¨ casual mask å¯ä»¥ç›´æŽ¥å¤„ç†æ•´ä¸ªå¤šè½®å¯¹è¯æ•°æ®ã€‚æ­¤æ”¹åŠ¨è¿˜æ¶ˆé™¤äº†äºŒç»´ç¼–ç çš„éœ€è¦ã€‚

ðŸ’¡ **å¯å‘ç‚¹**ï¼šDecoder-only æž¶æž„å±•çŽ°äº†å¼ºå¤§çš„è‡ªå›žå½’ç”Ÿæˆèƒ½åŠ›ã€‚


### æ ·æœ¬æž„å»ºä¸ŽæŸå¤±è®¡ç®—
åœ¨å¤„ç†å¤šè½®å¯¹è¯æ—¶ï¼Œä¾‹å¦‚ä¸‰è½®å¯¹è¯ Q1A1ï¼ŒQ2A2ï¼ŒQ3A3ï¼š

- **PrefixLM éœ€è¦æž„å»ºçš„æ ·æœ¬**ï¼š
  - Q1 -> A1
  - Q1A1Q2 -> A2
  - Q1A1Q2A2Q3 -> A3

- **Decoder-only æ ·æœ¬æž„å»ºä¸ŽæŸå¤±è®¡ç®—**ï¼š
  - æ ·æœ¬æž„å»ºï¼šQ1 A1 Q2 A2 Q3 A3
  - æŸå¤±è®¡ç®—ï¼šåªéœ€è®¡ç®— A1ã€A2 å’Œ A3 éƒ¨åˆ†


## å¸¸è§é”™è¯¯
> âš  åœ¨ä½¿ç”¨ prefix-decoder æž¶æž„æ—¶ï¼Œå®¹æ˜“é€ æˆæ•°æ®å†—ä½™å’Œè®­ç»ƒå¤æ‚åº¦å¢žåŠ ã€‚


## è¡ŒåŠ¨æ¸…å•
- [ ] æ·±å…¥ç ”ç©¶ SwiGLU æ¿€æ´»å‡½æ•°çš„ä¼˜åŠ¿ã€‚
- [ ] æŽ¢è®¨ RoPE åœ¨å…¶ä»–æ¨¡åž‹ä¸­çš„åº”ç”¨ã€‚
- [ ] åˆ†æžå¤šæŸ¥è¯¢æ³¨æ„åŠ›ï¼ˆMQAï¼‰çš„å…·ä½“å®žçŽ°ç»†èŠ‚ã€‚

> åŽŸå§‹å‡ºå¤„ï¼š[GitHub](https://github.com/THUDM/ChatGLM2-6B)
